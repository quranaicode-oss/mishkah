
# Mishkah v5: ููุชุจุฉ ุงููุงุฌูุงุช ุงูุฃูุงููุฉ ุงููููุฌูุฉ

ูุณุฎุฉ ููุนุงุฏ ูุชุงุจุชูุง ุจุงููุงููุ ููุฌูุฉ ูุจูุงุก ูุงุฌูุงุช ุนุงููุฉ ุงูุฃุฏุงุก ุนูู ููุณูุฉ **ุงูุญูููุฉ ุงููุงุญุฏุฉ + ุงูููุงุทู ุงูุฌุฑุงุญูุฉ**ุ ุจุฏูู ุงูุญุงุฌุฉ ุฅูู DOM ุงูุชุฑุงุถู (Virtual DOM) ุนุงู.

## ููุงุฐุง Mishkahุ ุจูุงู ุถุฏ ุงูุชุนููุฏ ุงูุฒุงุฆู

> ูู ุนุงูู ุชุณูุทุฑ ุนููู ุฃุทุฑ ุนูู ุถุฎูุฉ ุจูููุช ููุฑู ุนูู ูุชุนุฏุฏุฉ ุงูุฌูุณูุงุชุ ููุฑุถ ุนูู ุงููุจุฑูุฌ ุงููุฑุฏู ูุงููุฑู ุงูุตุบูุฑุฉ "ุถุฑูุจุฉ" ูู ูุทูุจููุง. ููุถู hooks ุงููุชูุงุซุฑุฉ ูู Reactุ ูุงูููุงูู ุงููุฑููุฉ ุงูุตุงุฑูุฉ ูู Angularุ ูููุง ุญููู ููุดุงูู ูุง ุชูุงุฌููุง ุบุงูุจูุฉ ุงููุดุงุฑูุน. ุฅููุง ุฃุฏูุงุช ูุจูุช ุงููุจุฑูุฌ ุจูููุฏ ููุฏุณูุฉ ูุนูุฏุฉุ ูุญููุช ูุชุนุฉ ุงูุฅูุฌุงุฒ ุงูุณุฑูุน ุงูุชู ุนุฑููุงูุง ูุน JQuery ุฅูู ูุนุงูุงุฉ ูุน ุทุจูุงุช ูู ุงููุณุงุฆุท ูุงูููููุช ุงูุจุฑูุฌู.

`Mishkah v5` ูู ุนูุฏุฉ ุฅูู ุงููุจุงุฏุฆ ุงูุฃููู. ุฅููุง ููุณุช ูุฌุฑุฏ ููุชุจุฉุ ุจู ูู **ุจูุฆุฉ ููุนุฒูุฉ ุชูุฑุถ ููุงููููุง ุงูุฎุงุตุฉ ูููุน ุงูููุถู**ุ ูุน ุงูุญูุงุธ ุนูู ุงูุจุณุงุทุฉ ูุงูุณุฑุนุฉ. ูู ุชุฑูุถ ููุฑุฉ ุฃู ุงูููุฉ ุชุฃุชู ูู ุงูุชุนููุฏุ ูุชูุฏู ูุณุงุฑูุง ูุงุถุญูุง ูุจูููุง ุนูู ููุณูุฉ ุตุงุฑูุฉ.

## ููุณูุฉ ูุดูุงุฉ: ุงููุธุงู ุงููููู ููุชุทุจููุงุช

ุชุชููู ููุณูุฉ ูุดูุงุฉ ูู ุซูุงุซุฉ ุฃุฑูุงู ุฃุณุงุณูุฉ ุชุนูู ูุนูุง ุจุชูุงุบู:

### ูก. ุงูุญูููุฉ ุงูุนููุง ุงููุงุญุฏุฉ (The Single Truth)

ูู Reactุ ุชุชูุงุซุฑ ูุตุงุฏุฑ ุงูุญูููุฉ ุจูู `useState`, `useContext`, `useReducer` ูููุชุจุงุช ุฎุงุฑุฌูุฉุ ุฎุงููุฉู "ุฃุฑุจุงุจูุง ูุชูุฑููู" ูุชูุงุฒุนูู ุนูู ุชุญุฏูุซ ุงููุงุฌูุฉ. ูู Angularุ ุงูุญูููุฉ ููุฒุนุฉ ูู ุฎุฏูุงุช ูููุฆุงุช ูุชุดุนุจุฉ.

ูู `Mishkah`ุ ููุงู ูุตุฏุฑ ูุงุญุฏ ููุท ููุญูููุฉ: **`app.truth`**. ูู "ุงูุณูุงุก" ุงูุชู ุชูุฒู ูููุง ูู ุงูุฃูุงูุฑ. ูุง ุชูุฌุฏ ุญุงูุฉ ูุญููุฉุ ูุง ุชูุฌุฏ ููุถู. ุฃู ุชุบููุฑ ูุฌุจ ุฃู ููุฑ ุนุจุฑ ูุฐุง ุงููุตุฏุฑ ุงููุฑูุฒูุ ููุง ูุถูู ูุธุงููุง ูุทูููุง.

### ูข. ุงูุฃูุฑ ูู ุงูุญูููุฉ ุงูุนููุง ุฅูู ุงูููุงุทู ุงูุฃุฏูู (Surgical Regions)

ุชุนุชูุฏ ุงูุฃุทุฑ ุงูุญุฏูุซุฉ ุนูู ุงูู VDOMุ ููู ููุฑุฉ ุจุงูุธุฉ ุงูุซูู ุชููู ุนูู ุฅุนุงุฏุฉ ุจูุงุก "ููู" ุงูุชุฑุงุถู ูุงูู ูููุงุฑูุชู ุจุงููุงูุน ูุชุญุฏูุฏ ุงูุชุบููุฑุงุช.

`Mishkah` ุชุฑูุถ ูุฐุง ุงููุฏุฑ. ุงููุงุฌูุฉ ููุณูุฉ ุฅูู "ุฃุฑุงุถู" ุฃู **ููุงุทู (`Regions`)** ูุณุชููุฉ ููุณูุงุฉ. ุนูุฏูุง ุชุชุบูุฑ "ุงูุญูููุฉ ุงูุณูุงููุฉ"ุ ูุง ูุนูุฏ ุจูุงุก ูู ุดูุก. ุจู ูุฑุณู ุฃูุฑูุง ูุจุงุดุฑูุง ูุฏููููุง ููููุทูุฉ ุงููุชุฃุซุฑุฉ ููุท: **`app.truth.mark('regionKey')`**. ูุฐุง ูู ุงูุชุญุฏูุซ ุงูุฌุฑุงุญูุ ูุนุงูุ ุณุฑูุนุ ูุจุฏูู ูุณุงุฆุท.

### ูฃ. ุงูุฑููุจ ุงูุฏุงุฆู ูุงูุญุงุฑุณ ุงูุฃููู (Guardian & Auditor)

ุชุชุฑูู ุงูุฃุทุฑ ุงูุฃุฎุฑู ูุชูุชุดู ูุดุงูู ุงูุฃุฏุงุก ุจููุณู ุจุนุฏ ููุงุช ุงูุฃูุงู. `Mishkah` ุชุฃุชู ูุน "ุฑููุจ" ูุฏูุฌ. ุงูู **Guardian** ููุฑุถ ุณูุงุณุงุช ุงูุฃุฏุงุกุ ูุงูู **Auditor** ูุณุฌู ูู ุดุงุฑุฏุฉ ููุงุฑุฏุฉ. ููููู ุชุญุฏูุฏ "ููุฒุงููุฉ ุฒูููุฉ" ููู ููุทูุฉุ ูุฅุฐุง ุชุฌุงูุฒุชูุงุ ููุตุฏุฑ "ุงูุฑููุจ" ุชุญุฐูุฑูุง ุฃู ุนููุจุฉ (ุญุณุจ ุงูุฅุนุฏุงุฏุงุช). ูุฐุง ููุณ ุฑูุงููุฉุ ุจู ูู ุฌุฒุก ูุง ูุชุฌุฒุฃ ูู ุงููุธุงู ูุถูุงู ุจูุงุก ุงูุชุทุจูู ุณุฑูุนูุง.

## ููุงุฑูุฉ ููุณููุฉ

| ุงูููููู | Mishkah v5 | React | Angular |
| :--- | :--- | :--- | :--- |
| **ูุตุฏุฑ ุงูุญูููุฉ** | ุญูููุฉ ุนููุง ูุงุญุฏุฉ (`app.truth`) | ูุชุญููุงุช ูุดุฑุฐูุฉ ูุชูุงุฒุนุฉ (`useState`, `useContext`...) | ุจูุฑููุฑุงุทูุฉ ูุชุบููุฉ ูุชุดุนุจุฉ (Services, rxjs) |
| **ุขููุฉ ุงูุชุญุฏูุซ** | ุฃูุฑ ูุจุงุดุฑ ูุฌุฑุงุญู (`mark`) | VDOM Diffing (ูููู ูุบูุฑ ูุจุงุดุฑ) | Change Detection (ูุนูุฏ ููุฑุชุจุท ุจู Zones) |
| **ุฅุฏุงุฑุฉ ุงูุฃุฏุงุก** | ุฑููุจ ุฏุงุฆู ูุญุงุฑุณ ุฃููู (ูุฏูุฌ) | ุฃุฏูุงุช ุฎุงุฑุฌูุฉ (Profiler) ุชุญุชุงุฌ ุชูุนูููุง ูุฏูููุง | ุฃุฏูุงุช ุฎุงุฑุฌูุฉ ูุชุญุชุงุฌ ุฎุจุฑุฉ ุนูููุฉ |
| **ุงูุชุนุงูู ูุน ุงูุฃุญุฏุงุซ** | ุชูููุถ ูุจุงุดุฑ ููุตูู (`data-on*`) | ุชุนุฑูู ูุฏูู ููู ูููู (`onClick={fn}`) | ุชุนุฑูู ูุฏูู ูุฑุจุท ูุนูุฏ |
| **ุจูุฆุฉ ุงูุนูู** | ูุงุนูุฉ ุจุงููุบุฉ ูุงูุซูู (RTL/Theme-aware) | ุชุชุทูุจ ููุชุจุงุช ุฅุถุงููุฉ ูุฌูุฏูุง ูุฏูููุง | ุชุชุทูุจ ุฅุนุฏุงุฏุงุช ูุนูุฏุฉ ูููุชุจุงุช ุฅุถุงููุฉ |
| **ูุซุงูู ูู** | ุงููุจุฑูุฌ ุงููุฑุฏู ูุงููุฑู ุงูุตุบูุฑุฉ ูุงููุชูุณุทุฉ |  ุจูู ูุฎุฏูุฉ ูุฑู ูุฎุชููุฉ ูู ุดุฑูุงุช ูุถุทุฑุจุฉ ูุนุชูุฏ ุนูู ุฃุฏูุงุช ูุซูุฑุฉ ูู ูุตุงุฏุฑ ูุฎุชููุฉ | ุจูู ุจููุฑ ุดุฑูุงุช ุชูุฑุถ ุทุจูุงุช ุฅุฏุงุฑูุฉ ุจูุฑููุฑุงุทูุฉ ููุณุงุฆุท ูุชุนุฏุฏุฉ ูุนูุฏุฉ |

## ุงูุจุฏุก ุงูุณุฑูุน

ุดุงูุฏ ููู ุชุชุฑุฌู ุงูููุณูุฉ ุฅูู ููุฏ ุจุณูุท ูููู.

#### ูก. ูููู HTML ุจุณูุท:

```html
<div id="app">
  <header id="hdr"></header>
  <main id="main"></main>
</div>
```

#### ูข. ุชููุฆุฉ ุงูุชุทุจูู (ุงูููุฏ ูู ุงูุนูุฏ):

```javascript
const { Core } = window.Mishkah;

const app = Core.createApp({
  root: '#app', // ุชูุนูู ุงูุชูููุถ ุงููุฑูุฒู ููุฃุญุฏุงุซ
  initial: { user: { name: 'Sultan' }, counter: 0 },

  // ุงูุฃูุงูุฑ: ููุทู ุงูุชุทุจูู ูุนุฒูู ููุธูู
  commands: {
    inc({ truth }) {
      // 1. ุบููุฑ ุงูุญูููุฉ
      truth.set(s => ({ ...s, counter: s.counter + 1 }));
      // 2. ุฃุฑุณู ุงูุฃูุฑ ููุฃุฑุถ (ุงูููุทูุฉ) ุงููุชุฃุซุฑุฉ
      truth.mark('main'); 
    },
    toggleTheme({ env }) { 
      env.toggleTheme(); // ุงูุจูุฆุฉ ุงููุฏูุฌุฉ ุชุชููู ุจุงูุจุงูู
    },
  },

  // ุชุณุฌูู ุงูููุงุทู: ูู ููุทูุฉ ุชุนุฑู ููู ุชุจูู ููุณูุง ูู ุงูุญูููุฉ
  register({ registerRegion }) {
    registerRegion('hdr', '#hdr', (state, { i18n }) => (
      `<div class="p-3">
         <button class="btn" data-onclick="toggleTheme">๐</button>
         <span>${i18n.t('hello', { name: state.user.name })}</span>
       </div>`
    ));

    registerRegion('main', '#main', (state) => (
      `<div class="p-4">
         <button class="btn" data-onclick="inc">+</button>
         <span class="ml-2">${state.counter}</span>
       </div>`
    ), null, { 
        priority: 'high', 
        budget: { maxMs: 16 } // ุชุญุฏูุฏ ููุฒุงููุฉ ุฃุฏุงุก ููุฐู ุงูููุทูุฉ
    });
  }
});
```

## ุงูููุงููู ุงูุฃุณุงุณูุฉ

  - **Truth (ุงูุญูููุฉ)**: ุญุงูุฉ ูุฑูุฒูุฉ ูุง ุชูููุฐ ุชุบููุฑุงุชูุง ุฅูุง ุนูุฏูุง ุชุฃูุฑ ุฃูุช ุจุฐูู ุนุจุฑ `mark` ุฃู `rebuild`. ุงุณุชุฎุฏู `batch()` ูุชุฌููุน ุงูุฃูุงูุฑ ูู ุนูููุฉ ูุงุญุฏุฉ ูููุฉ.

  - **Regions (ุงูููุงุทู)**: ูู ููุทูุฉ ูู ูุญุฏุฉ ุจูุงุก ูุณุชููุฉ ููุง `buildFn` ุฎุงุตุฉ ุจูุงุ ูุฃููููุฉุ ูููุฒุงููุฉ ุฃุฏุงุก.

  - **Attribute Delegation (ุงูุชูููุถ)**: ุจุฏูุงู ูู `addEventListener` ุงููุชูุฑุฑุ ุงุณุชุฎุฏู `data-onclick="commandName"` ูุฑุจุท ุงูุฃุญุฏุงุซ ุจุงูุฃูุงูุฑ ูุจุงุดุฑุฉ. HTML ูุตุจุญ ูุตูููุง ูููุทูู ูุฑูุฒููุง.

  - **Post-Sync ููููุงุฐุฌ**: ุชุญุงูุธ `Mishkah` ุจุฐูุงุก ุนูู ููู ุญููู ุงูุฅุฏุฎุงู `<select>` ู `checkbox` ุจุนุฏ ุฅุนุงุฏุฉ ุจูุงุก ุงูููุทูุฉุ ููุง ูููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ.

  - **Devtools (ุฃุฏูุงุช ุงููุทูุฑ)**: ุงุณุชุฎุฏู `app.devtools.printSummary()` ูู ุฃู ููุช ูุทุจุงุนุฉ ุชูุฑูุฑ ุฃุฏุงุก ููุตู ุนู ูู ููุทูุฉุ ููุดู ุฃู ุชุฌุงูุฒุงุช ููููุฒุงููุฉ.

## ุฃูุถู ุงูููุงุฑุณุงุช

  * **ุงุฌุนู `buildFn` ุบุจููุง**: ูุฌุจ ุฃู ุชูุชุตุฑ ุฏุงูุฉ ุงูุจูุงุก ุนูู ุนุฑุถ ุงูุญุงูุฉ ููุท. ุฃู ููุทู ูุฌุจ ุฃู ูููู ูู `commands`.
  * **ููุฑ ุจุงูููุงุทู**: ูุจู ูุชุงุจุฉ ุงูููุฏุ ูุณูู ูุงุฌูุชู ุฅูู ุฃุตุบุฑ ููุงุทู ููุทููุฉ ููููุฉ.
  * **ุงุณุชุฎุฏู `batch()` ุจุณุฎุงุก**: ุฃู ุนูููุฉ ุชุชุถูู ุฃูุซุฑ ูู `set` ุฃู `mark` ูุฌุจ ุฃู ุชููู ุฏุงุฎู `batch`.
  * **ุซู ุจุงูุฑููุจ**: ุงุถุจุท `budget` ููููุงุทู "ุงูุณุงุฎูุฉ" ูุฑุงูุจ ุชูุงุฑูุฑ ุงูุฃุฏุงุก ุจุงูุชุธุงู.

-----

 *ูุฐุง ุงููุดุฑูุน ูุชุงุญ ููุงุณุชุฎุฏุงู ุงูุนุงู ุจุดุฑุท ุฐูุฑ ุงููุตุฏุฑ.

 *ยฉ 2025 ูุงุณ ููุจุฑูุฌูุงุช (MAS for Programming)
