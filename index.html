<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <title>Ù…Ø´ÙƒØ§Ø© â€” ØªØ¨ÙˆÙŠØ¨Ø§Øª + Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù…Ø«Ø§Ù„</title>

  <script src="./mishkah-utils.js"></script>
  <script src="./mishkah.core.js"></script>
  <script src="./mishkah-ui.js"></script>
  <script src="./readme.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: light dark;
      --page-gradient: linear-gradient(160deg, #f8f9ff 0%, #e8ecff 100%);
      --page-overlay-1: radial-gradient(circle at 20% 25%, rgba(79, 70, 229, 0.18), transparent 55%);
      --page-overlay-2: radial-gradient(circle at 80% 70%, rgba(14, 165, 233, 0.18), transparent 50%);
      --panel-glass: rgba(255, 255, 255, 0.78);
      --panel-border: rgba(99, 102, 241, 0.12);
      --panel-shadow: 0 25px 50px -20px rgba(15, 23, 42, 0.18);
      --tile-bg: linear-gradient(160deg, rgba(255, 255, 255, 0.95), rgba(241, 245, 249, 0.85));
      --tile-bg-revealed: linear-gradient(160deg, rgba(129, 140, 248, 0.75), rgba(79, 70, 229, 0.65));
      --tile-border: rgba(99, 102, 241, 0.25);
      --letters-shadow: 0 18px 45px -24px rgba(15, 23, 42, 0.35);
      --letters-hover: 0 25px 50px -20px rgba(99, 102, 241, 0.45);
      --accent-ring: rgba(79, 70, 229, 0.18);
      --tile-size: 3.1rem;
    }

    :root.dark {
      --page-gradient: linear-gradient(160deg, #0d1224 0%, #111c3d 100%);
      --page-overlay-1: radial-gradient(circle at 80% 30%, rgba(168, 85, 247, 0.22), transparent 55%);
      --page-overlay-2: radial-gradient(circle at 15% 80%, rgba(56, 189, 248, 0.18), transparent 55%);
      --panel-glass: rgba(17, 25, 40, 0.75);
      --panel-border: rgba(148, 163, 184, 0.32);
      --panel-shadow: 0 25px 50px -18px rgba(15, 23, 42, 0.55);
      --tile-bg: linear-gradient(160deg, rgba(30, 41, 59, 0.78), rgba(15, 23, 42, 0.92));
      --tile-bg-revealed: linear-gradient(160deg, rgba(99, 102, 241, 0.55), rgba(79, 70, 229, 0.38));
      --tile-border: rgba(148, 163, 184, 0.35);
      --letters-shadow: 0 20px 40px -18px rgba(148, 163, 184, 0.35);
      --letters-hover: 0 28px 60px -20px rgba(99, 102, 241, 0.6);
      --accent-ring: rgba(129, 140, 248, 0.35);
    }

    @media (min-width: 640px) {
      :root { --tile-size: 3.25rem; }
    }

    @media (min-width: 1024px) {
      :root { --tile-size: 3.4rem; }
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      height: 100vh;
      font-family: 'Tajawal', 'Cairo', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--page-gradient);
      color: var(--foreground);
      position: relative;
      overflow: hidden;
      transition: background 0.45s ease, color 0.45s ease;
    }

    body::before,
    body::after {
      content: '';
      position: absolute;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      background: var(--page-overlay-1);
      mix-blend-mode: screen;
      animation: pulseNebula 18s ease-in-out infinite alternate;
    }

    body::after {
      background: var(--page-overlay-2);
      animation-delay: 6s;
    }

    #app {
      position: relative;
      z-index: 1;
    }

    .app-shell {
      min-height: 100vh;
      max-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-shell {
      flex: 1;
      min-height: 0;
      display: flex;
      overflow: hidden;
    }

    .main-region {
      flex: 1;
      min-height: 0;
      overflow-y: auto;
      padding-bottom: 4rem;
      scroll-behavior: smooth;
    }

    .glass-panel {
      background: var(--panel-glass);
      backdrop-filter: blur(26px) saturate(135%);
      border: 1px solid var(--panel-border);
      box-shadow: var(--panel-shadow);
      transition: border-color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
    }

    .glow-outline {
      box-shadow: 0 0 0 1px var(--accent-ring), var(--panel-shadow);
    }

    .animate-float {
      animation: floatHalo 14s ease-in-out infinite;
    }

    .letter-tile {
      transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.35s ease;
      border: 1px solid var(--tile-border);
      background: var(--tile-bg);
      color: var(--foreground);
      text-shadow: 0 2px 12px rgba(15, 23, 42, 0.2);
    }

    .letter-slot {
      width: var(--tile-size);
      height: var(--tile-size);
    }

    .letter-space {
      width: calc(var(--tile-size) * 0.5);
      height: var(--tile-size);
    }

    .letter-tile[data-revealed="true"] {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 18px 40px -22px rgba(79, 70, 229, 0.55);
      background: var(--tile-bg-revealed);
      color: #fff;
    }

    .letters-grid button {
      transition: transform 0.25s ease, box-shadow 0.25s ease, opacity 0.25s ease;
      box-shadow: var(--letters-shadow);
      font-size: 1.25rem;
      font-weight: 700;
      border-radius: 0.9rem !important;
      height: var(--tile-size);
      min-height: var(--tile-size);
      min-width: var(--tile-size);
    }

    .letters-grid button:hover:not([disabled]) {
      transform: translateY(-5px) scale(1.03);
      box-shadow: var(--letters-hover);
    }

    .letters-grid button[disabled] {
      opacity: 0.35;
      cursor: not-allowed;
    }

    .md-prose {
      line-height: 1.8;
      font-size: 1rem;
      color: var(--foreground);
    }

    .md-prose h1,
    .md-prose h2,
    .md-prose h3,
    .md-prose h4,
    .md-prose h5,
    .md-prose h6 {
      font-family: 'Cairo', 'Tajawal', system-ui, sans-serif;
      font-weight: 700;
      letter-spacing: 0.01em;
      color: color-mix(in oklab, var(--foreground) 92%, var(--primary) 8%);
      margin: 1.6em 0 0.8em;
    }

    .md-prose p {
      margin: 1em 0;
      color: color-mix(in oklab, var(--foreground) 88%, var(--muted-foreground) 12%);
    }

    .md-prose ul,
    .md-prose ol {
      margin: 1em 0;
      padding-inline-start: 1.4em;
      display: flex;
      flex-direction: column;
      gap: 0.5em;
    }

    .md-prose li {
      position: relative;
      padding-inline-start: 0.3em;
    }

    .md-prose blockquote {
      margin: 1.2em 0;
      padding: 1.2em 1.5em;
      border-inline-start: 4px solid color-mix(in oklab, var(--primary) 80%, transparent);
      background: color-mix(in oklab, var(--surface-1) 80%, transparent);
      border-radius: 1.2rem;
      color: color-mix(in oklab, var(--foreground) 80%, var(--muted-foreground) 20%);
      box-shadow: 0 12px 30px -24px rgba(79, 70, 229, 0.45);
    }

    .md-prose pre {
      margin: 1.4em 0;
      padding: 1.2em 1.4em;
      border-radius: 1.2rem;
      background: color-mix(in oklab, var(--surface-2) 88%, transparent);
      box-shadow: 0 24px 45px -24px rgba(15, 23, 42, 0.45);
      overflow-x: auto;
      font-size: 0.92rem;
      direction: ltr;
      text-align: left;
    }

    .md-prose code {
      font-family: 'Fira Code', 'IBM Plex Mono', 'Cascadia Code', monospace;
      background: color-mix(in oklab, var(--surface-2) 85%, transparent);
      padding: 0.15em 0.4em;
      border-radius: 0.5em;
      font-size: 0.92em;
    }

    .md-prose pre code {
      background: transparent;
      padding: 0;
    }

    .md-prose table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5em 0;
      border-radius: 1.2rem;
      overflow: hidden;
      box-shadow: 0 18px 45px -25px rgba(15, 23, 42, 0.35);
    }

    .md-prose thead {
      background: color-mix(in oklab, var(--surface-2) 55%, var(--primary) 45%);
      color: color-mix(in oklab, var(--primary-foreground) 65%, var(--foreground) 35%);
    }

    .md-prose th,
    .md-prose td {
      padding: 0.85em 1em;
      border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
      text-align: start;
    }

    .md-prose tbody tr:nth-child(even) {
      background: color-mix(in oklab, var(--surface-1) 80%, transparent);
    }

    .md-prose img {
      max-width: 100%;
      height: auto;
      display: inline-block;
      vertical-align: middle;
    }

    .settings-tile {
      border-radius: 1.5rem;
      padding: 1rem 1.25rem;
      background: color-mix(in oklab, var(--surface-2) 70%, transparent);
      border: 1px solid color-mix(in oklab, var(--border) 55%, transparent);
      box-shadow: 0 12px 35px -22px rgba(15, 23, 42, 0.35);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.75rem;
    }

    .game-panel {
      position: relative;
    }

    .game-board {
      position: relative;
      transition: transform 0.35s ease;
    }

    .puzzle-row {
      animation-duration: 0.6s;
      animation-timing-function: ease-in-out;
    }

    .game-board.feedback-correct .puzzle-row {
      animation-name: tilePop;
    }

    .game-board.feedback-wrong .puzzle-row {
      animation-name: tileShake;
    }

    .game-board.feedback-win .puzzle-row {
      animation-name: tileCelebrate;
    }

    .game-board.feedback-lose .puzzle-row {
      animation-name: tileFade;
    }

    .celebration-card,
    .gameover-card {
      position: relative;
      overflow: hidden;
    }

    .celebration-card::after {
      content: '';
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 50% 20%, rgba(79, 70, 229, 0.25), transparent 55%);
      opacity: 0.8;
      animation: pulseNebula 8s ease-in-out infinite;
      pointer-events: none;
    }

    .gameover-card::after {
      content: '';
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at 50% 80%, rgba(239, 68, 68, 0.25), transparent 65%);
      opacity: 0.7;
      animation: overlayPulse 6s ease-in-out infinite;
      pointer-events: none;
    }

    .game-overlay-content {
      position: relative;
      z-index: 1;
    }

    .confetti-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 25;
    }

    .confetti-piece {
      position: absolute;
      top: -10vh;
      width: 0.55rem;
      height: 1.6rem;
      border-radius: 999px;
      opacity: 0;
      animation: confettiFall 3.6s ease-in forwards;
    }

    .confetti-piece:nth-child(odd) {
      animation-duration: 4s;
    }

    .md-prose a {
      color: var(--primary);
      text-decoration: none;
      border-bottom: 1px solid color-mix(in oklab, var(--primary) 65%, transparent);
      transition: color 0.2s ease, border-color 0.2s ease;
    }

    .md-prose a:hover {
      color: color-mix(in oklab, var(--primary) 90%, black);
      border-color: currentColor;
    }

    .md-prose hr {
      margin: 2.5em 0;
      border: none;
      border-top: 1px dashed color-mix(in oklab, var(--border) 65%, transparent);
    }

    @keyframes floatHalo {
      0%, 100% { transform: translate3d(0, 0, 0); }
      50% { transform: translate3d(0, -18px, 0) scale(1.01); }
    }

    @keyframes pulseNebula {
      0% { opacity: 0.45; }
      50% { opacity: 0.75; }
      100% { opacity: 0.45; }
    }

    @keyframes tilePop {
      0% { transform: scale(0.94); }
      40% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    @keyframes tileShake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
    }

    @keyframes tileCelebrate {
      0% { transform: translateY(0) scale(1); }
      30% { transform: translateY(-10px) scale(1.05); }
      70% { transform: translateY(4px) scale(0.98); }
      100% { transform: translateY(0) scale(1); }
    }

    @keyframes tileFade {
      0% { opacity: 1; }
      100% { opacity: 0.6; }
    }

    @keyframes overlayPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }

    @keyframes confettiFall {
      0% { opacity: 0; transform: translate3d(0, -20vh, 0) rotate(0deg); }
      10% { opacity: 1; }
      100% { opacity: 0; transform: translate3d(0, 110vh, 0) rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
  (function(){
    const M = Mishkah, U = M.utils, UI = M.UI, D = M.DSL;
    const { tw } = U.twcss;
    const { makeLangLookup } = U.lang;

    /*
    ================================================================
    |                                                              |
    |      Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…: Ø±Ø­Ù„Ø© Ø§Ù„Ø®Ù„Ù‚ ÙÙŠ "Ù…Ø´ÙƒØ§Ø©"             |
    |                                                              |
    ================================================================
    |
    | Ø¥Ù† Ø¨Ù†Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ØŒ Ø¨Ù„ Ù‡Ùˆ Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø±Ø­Ù„Ø©
    | Ø§Ù„Ø®Ù„Ù‚ ÙˆØ§Ù„ØªÙƒÙˆÙŠÙ† ÙƒÙ…Ø§ ØªØµÙÙ‡Ø§ ÙÙ„Ø³ÙØ© "Ù…Ø´ÙƒØ§Ø©". Ø³Ù†Ù…Ø± Ø¨Ù…Ø±Ø­Ù„ØªÙŠÙ†
    | Ø£Ø³Ø§Ø³ÙŠØªÙŠÙ†ØŒ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© ØªØªÙƒÙˆÙ† Ù…Ù† Ø²ÙˆØ¬ÙŠÙ†:
    |
    | 1. Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ØªØ³ÙˆÙŠØ© (ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¬Ø³Ø¯)
    |    - Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø·ÙŠÙ† ÙˆØ§Ù„Ø°Ø±Ø§Øª (Atoms as Components)
    |    - Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ù„Ù… Ø§Ù„ÙØ·Ø±ÙŠ (database as DNA)
    |    Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø¬Ø³Ø¯ Ù…ÙØµÙˆÙ‘ÙŽØ± (VDOM) Ù‚Ø¨Ù„ Ù†ÙØ® Ø§Ù„Ø±ÙˆØ­.
    |
    | 2. Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„ØªÙ…ÙƒÙŠÙ† ÙˆØ§Ù„ØªÙƒÙ„ÙŠÙ (Ù†ÙØ® Ø§Ù„Ø±ÙˆØ­ ÙˆØ§Ù„Ø­ÙŠØ§Ø©)
    |    - Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† (database as State)
    |    - Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­ (Orders)
    |    Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙƒØ§Ø¦Ù† Ø­ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙŠØªÙØ§Ø¹Ù„ ÙˆÙŠØ³ØªØ¬ÙŠØ¨.
    |
    */

    // ================================================================
    // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ©: Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø®Ø§Ù… Ù„Ù„Ù…Ø¹Ø±ÙØ©
    // Ù‚Ø¨Ù„ Ø§Ù„Ø®Ù„Ù‚ØŒ Ù†Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©: Ø§Ù„Ù†ØµÙˆØµØŒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙˆØ§Ù„Ù‚ÙˆØ§Ø¹Ø¯.
    // ================================================================

    /* ===================== i18n: Ø§Ù„Ù…Ø¹Ø§Ø¬Ù… Ø§Ù„Ù„ØºÙˆÙŠØ© ===================== */
    const dict = {
      'app.title'   : { ar:'Ù…Ø´ÙƒØ§Ø© â€” Ù…Ø´ÙƒØ§Ø© Ø§Ù„Ù†ÙˆØ± ÙˆÙ„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù…Ø«Ø§Ù„', en:'Mishkah â€” Lighthouse Docs & Proverbs Game' },
      'header.subtitle': { ar:'Ù…Ø±Ø¬Ø¹ Ø§Ù„Ù†ÙˆØ± ÙŠØ¬Ù…Ø¹ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ØŒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ ÙˆÙ„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù…Ø«Ø§Ù„ ÙÙŠ Ù„ÙˆØ­Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆØ§Ø³Ø¹Ø©.', en:'A radiant hub that unifies the docs, controls, and the Proverbs game in a spacious canvas.' },
      'nav.menu'       : { ar:'Ø§Ù„ØªÙ†Ù‚Ù„', en:'Navigation' },
      'nav.readmeBase' : { ar:'Ù…Ø´ÙƒØ§Ø© Ø§Ù„Ù†ÙˆØ± ÙˆØ§Ù„Ø°ÙƒØ± Ø§Ù„Ø£Ø¹Ù„Ù‰', en:'Mishkah of Light & Highest Remembrance' },
      'nav.readmeTec'  : { ar:'ÙˆØ«ÙŠÙ‚Ø© Ù…Ø´ÙƒØ§Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©', en:'Mishkah Technical Charter' },
      'nav.counter'    : { ar:'Ø§Ù„Ø¹Ø¯Ø§Ø¯', en:'Counter' },
      'nav.game'       : { ar:'Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù…Ø«Ø§Ù„', en:'Proverbs Game' },
      'doc.base.lead'  : { ar:'Ø±Ø­Ù„Ø© ÙÙ„Ø³ÙØ© Ù…Ø´ÙƒØ§Ø© ÙˆÙ…Ù†Ù‡Ø¬ Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø°ÙŠ Ø£Ù„Ù‡Ù… ØªØµÙ…ÙŠÙ…Ù‡Ø§.', en:'The philosophical journey behind Mishkah and the higher remembrance that inspires it.' },
      'doc.tec.lead'   : { ar:'Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ù…Ø´ÙƒØ§Ø© ÙˆÙ…Ø­Ø±ÙƒÙ‡Ø§ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ.', en:'The complete technical dossier for Mishkahâ€™s architecture and declarative engine.' },
      'doc.language.hint': { ar:'Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ù„ØºØ© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„ØªÙ‚Ø±Ø£ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø¨Ù„ØºØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©.', en:'Use the header controls to switch between Arabic and English.' },
      'counter.title'  : { ar:'Ø¹Ø¯Ø§Ø¯ Ø¨Ø³ÙŠØ·', en:'Simple Counter' },
      'counter.reset'  : { ar:'Ø¥Ø¹Ø§Ø¯Ø©', en:'Reset' },
      'game.title'     : { ar:'Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù…Ø«Ø§Ù„ Ùˆ Ø§Ù„Ø­ÙƒÙ…', en:'Proverbs & Wisdom Game' },
      'game.music'     : { ar:'Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„ØºØ§Ù…Ø±Ø©', en:'Mystery Music' },
      'game.timer'     : { ar:'Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ¹Ù„Ù…', en:'Learning Timer' },
      'game.seconds'   : { ar:'Ø«', en:'s' },
      'game.start'     : { ar:'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©', en:'Start Game' },
      'game.new'       : { ar:'Ù…Ø«Ù„ Ø¬Ø¯ÙŠØ¯', en:'New Proverb' },
      'game.tries'     : { ar:'Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©', en:'Tries Left' },
      'game.hintTitle' : { ar:'Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ', en:'Educational Hint' },
      'game.win'       : { ar:'Ø±Ø¨Ø­Øª! ðŸŽ‰', en:'You won! ðŸŽ‰' },
      'game.lose'      : { ar:'Ù„Ù„Ø£Ø³Ù Ø®Ø³Ø±Øª ðŸ™ˆ', en:'You lost ðŸ™ˆ' },
      'game.reveal'    : { ar:'Ø§ÙƒØªØ´Ù Ø§Ù„Ø­ÙƒÙ…Ø©', en:'Reveal Wisdom' },
      'game.solution'  : { ar:'Ø§Ù„Ø­Ù„ Ø§Ù„ÙƒØ§Ù…Ù„', en:'Full Solution' },
      'game.explanation':{ ar:'Ø´Ø±Ø­ Ø§Ù„Ù…Ø«Ù„', en:'Explanation' },
      'game.lesson'    : { ar:'Ù…Ø§ Ù†ØªØ¹Ù„Ù…Ù‡', en:'Key Lesson' },
      'game.source'    : { ar:'Ø§Ù„Ù…ØµØ¯Ø±', en:'Source' },
      'game.timeLabel' : { ar:'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ', en:'Time Left' },
      'game.letters'   : { ar:'Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ§Ø­Ø©', en:'Available Letters' },
      'game.statusLabel': { ar:'Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©', en:'Game Status' },
      'game.status.idle': { ar:'Ø¬Ø§Ù‡Ø²Ø©', en:'Ready' },
      'game.status.running': { ar:'Ù‚ÙŠØ¯ Ø§Ù„Ù„Ø¹Ø¨', en:'In Progress' },
      'game.status.won' : { ar:'Ø§Ù†ØªØµØ§Ø±', en:'Victory' },
      'game.status.lost': { ar:'Ø®Ø³Ø§Ø±Ø©', en:'Defeat' },
      'game.feedback.correct': { ar:'Ø£Ø­Ø³Ù†Øª! Ø­Ø±Ù ØµØ­ÙŠØ­ ÙŠÙ‚ØªØ±Ø¨ Ø¨Ùƒ Ù…Ù† Ø§Ù„Ø­ÙƒÙ…Ø©.', en:'Great job! A correct letter brings you closer to the wisdom.' },
      'game.feedback.wrong'  : { ar:'Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ù… ØªØµØ¨ Ø§Ù„Ù‡Ø¯ÙØŒ Ø¬Ø±Ù‘Ø¨ Ù…Ø³Ø§Ø±Ù‹Ø§ Ø¢Ø®Ø±.', en:'That guess missed the markâ€”try another path.' },
      'game.feedback.win'    : { ar:'Ø¥Ø¨Ø¯Ø§Ø¹! Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø­ÙƒÙ…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.', en:'Brilliant! The proverb has been unveiled.' },
      'game.feedback.lose'   : { ar:'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù„ÙƒÙ† Ø§Ù„Ø­ÙƒÙ…Ø© Ù…Ø§ Ø²Ø§Ù„Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø±Ùƒ.', en:'The tries are over, yet the wisdom still awaits you.' },
      'game.lastMove'        : { ar:'Ø±Ø¯Ø© ÙØ¹Ù„ ÙÙˆØ±ÙŠØ©', en:'Instant Feedback' },
      'game.musicOn'         : { ar:'Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ÙØ¹Ù‘Ù„Ø©', en:'Music On' },
      'game.musicOff'        : { ar:'Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙˆÙ‚ÙØ©', en:'Music Off' },
      'game.timerOn'         : { ar:'Ø§Ù„Ù…Ø¤Ù‚Øª Ù†Ø´Ø·', en:'Timer Enabled' },
      'game.timerOff'        : { ar:'Ø§Ù„Ù…Ø¤Ù‚Øª Ù…ØªÙˆÙ‚Ù', en:'Timer Disabled' },
      'game.overlay.winTitle'    : { ar:'Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙØ²Øª ðŸŽ‰', en:'Bravo! You Won ðŸŽ‰' },
      'game.overlay.winSubtitle' : { ar:'Ø¬Ù‡Ø¯Ùƒ Ø£Ø«Ù…Ø± Ø­ÙƒÙ…Ø© Ù…Ø¶ÙŠØ¦Ø©.', en:'Your effort blossomed into shining wisdom.' },
      'game.overlay.loseTitle'   : { ar:'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª', en:'Game Over' },
      'game.overlay.loseSubtitle': { ar:'Ù„Ø§ ØªÙŠØ£Ø³ØŒ Ø§Ù„Ø­ÙƒÙ…Ø© ØªÙÙƒØ§ÙØ¦ Ù…Ù† ÙŠØ¹Ø§ÙˆØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.', en:'Do not despairâ€”the wisdom rewards another try.' },
      'game.rewardTitle'     : { ar:'Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø­ÙƒÙ…Ø©', en:'Wisdom Reward' },
      'game.tryAgain'        : { ar:'Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§', en:'Try Again' },
      'game.playAgain'       : { ar:'Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', en:'Play Again' },
      'game.revealPrompt'    : { ar:'Ø§Ù†Ù‚Ø± Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø­ÙƒÙ…Ø© ÙƒØ§Ù…Ù„Ø© Ø¨Ø¹Ø¯ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬ÙˆÙ„Ø©.', en:'Tap to reveal the full wisdom after the round ends.' }
    };

    /* ===================== Markdown: Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ ===================== */
    const readmeStore = M.readme || {};
    const DOCS = {
      base:{
        ar: (readmeStore.base && readmeStore.base.ar) || '',
        en: (readmeStore.base && readmeStore.base.en) || (readmeStore.base && readmeStore.base.ar) || ''
      },
      tec:{
        ar: (readmeStore.tec && readmeStore.tec.ar) || '',
        en: (readmeStore.tec && readmeStore.tec.en) || (readmeStore.tec && readmeStore.tec.ar) || ''
      }
    };

    /* ===================== Game Data: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ===================== */
    const PROVERBS = [
      {
        t:"Ø±Ø¬Ø¹ Ø¨Ø®ÙÙŠ Ø­Ù†ÙŠÙ†",
        hint:"ÙŠÙÙ‚Ø§Ù„ Ù„Ù…Ù† Ø¹Ø§Ø¯ Ø¨Ù„Ø§ Ù†ØªÙŠØ¬Ø©",
        explanation:"ØªØ­ÙƒÙŠ Ø§Ù„Ù‚ØµØ© Ø¹Ù† Ø±Ø¬Ù„ ÙØ´Ù„ ÙÙŠ Ù…ÙØ§ÙˆØ¶Ø© Ø¥Ø³ÙƒØ§ÙÙŠ ÙØ¹Ø§Ø¯ Ø®Ø§Ù„ÙŠ Ø§Ù„ÙˆÙØ§Ø¶ ÙˆÙ‚Ø¯ ÙÙ‚Ø¯ Ù†Ø¹Ù„ÙŠÙ‡ØŒ ÙØµØ§Ø± Ù…Ø«Ù„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø®ÙŠØ¨Ø© Ø¨Ø¹Ø¯ Ù…Ø´Ù‚Ø©.",
        lesson:"Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ù…Ø±ÙˆÙ†Ø© ÙÙŠ Ø§Ù„ØªÙØ§ÙˆØ¶ ÙŠØ­Ù…ÙŠØ§Ù† Ù…Ù† Ø¶ÙŠØ§Ø¹ Ø§Ù„Ø¬Ù‡Ø¯ Ø¨Ù„Ø§ Ø«Ù…Ø±.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù‚Ø¯ÙŠÙ…"
      },
      {
        t:"Ø§Ù„ÙŠ Ø§Ø®ØªØ´ÙˆØ§ Ù…Ø§ØªÙˆØ§",
        hint:"ÙŠÙÙ†ØªÙ‚Ø¯ ÙÙŠÙ‡ Ø°Ù‡Ø§Ø¨ Ø§Ù„Ø­ÙŠØ§Ø¡",
        explanation:"Ù†Ø´Ø£ ÙÙŠ Ù…ØµØ± Ø²Ù…Ù† Ø§Ù„Ø­Ø±ÙŠÙ‚ Ø­ÙŠÙ† ÙØ¶Ù„Øª Ø¨Ø¹Ø¶ Ø§Ù„Ù†Ø³Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø­ÙŠØ§Ø¦Ù‡Ù† ÙÙ…ÙØªÙ†ØŒ ÙØµØ§Ø± ÙƒÙ†Ø§ÙŠØ© Ø¹Ù† ØªØ¨Ø¯Ù„ Ø§Ù„Ø£Ø­ÙˆØ§Ù„ ÙˆØºÙŠØ§Ø¨ Ø§Ù„Ø®Ø¬Ù„.",
        lesson:"Ø­ÙŠØ§Ø¡ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙŠÙ†Ø¹ÙƒØ³ Ø¹Ù„Ù‰ Ø³Ù„ÙˆÙƒÙ‡ ÙˆØ§Ø³ØªÙ‚Ø±Ø§Ø±Ù‡.",
        source:"Ù…Ø«Ù„ Ù…ØµØ±ÙŠ Ø´Ø¹Ø¨ÙŠ"
      },
      {
        t:"Ø§Ù‚Ù„Ø¨ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ ÙÙ…Ù‡Ø§ ØªØ·Ù„Ø¹ Ø§Ù„Ø¨Ù†Øª Ù„Ø§Ù…Ù‡Ø§",
        hint:"ÙŠØ´ÙŠØ± Ù„Ù„Ø´Ø¨Ù‡ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬ÙŠØ§Ù„",
        explanation:"ÙŠØ¹Ø¨Ø± Ø§Ù„Ù…Ø«Ù„ Ø¹Ù† Ø£Ù† Ø§Ù„ÙØªØ§Ø© ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø§ ØªØ´Ø¨Ù‡ Ø£Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹ ÙˆØ§Ù„Ø³Ù„ÙˆÙƒ Ù…Ù‡Ù…Ø§ Ø­Ø§ÙˆÙ„Øª Ø§Ù„Ø§Ø®ØªÙ„Ø§Ù.",
        lesson:"Ø§Ù„Ù‚Ø¯ÙˆØ© Ø§Ù„Ø£Ø³Ø±ÙŠØ© ØªØªØ±Ùƒ Ø¨ØµÙ…ØªÙ‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡.",
        source:"ØªØ±Ø§Ø« Ø´Ø¹Ø¨ÙŠ Ù…ØµØ±ÙŠ"
      },
      {
        t:"Ø§Ø¨Ù†Ùƒ Ø¹Ù„Ù‰ Ù…Ø§ ØªØ±Ø¨ÙŠÙ‡ Ùˆ Ø¬ÙˆØ²Ùƒ Ø¹Ù„Ù‰ Ù…Ø§ ØªØ¹ÙˆØ¯ÙŠÙ‡",
        hint:"ÙÙŠÙ‡ Ø­Ø¯ÙŠØ« Ø¹Ù† Ø£Ø«Ø± Ø§Ù„ØªØ±Ø¨ÙŠØ©",
        explanation:"ÙŠÙˆØ¶Ø­ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø°ÙŠ Ù†Ø²Ø±Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„Ø£Ø²ÙˆØ§Ø¬ ÙŠÙ†Ø¹ÙƒØ³ Ø¹Ù„ÙŠÙ†Ø§ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬.",
        lesson:"Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙˆØ§Ø¹ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø§Ù„Ø·ÙŠØ¨Ø© ØªØµÙ†Ø¹ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø±Ø©.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù…ØªØ¯Ø§ÙˆÙ„"
      },
      {
        t:"Ù…Ø§ Ø­Ùƒ Ø¬Ù„Ø¯Ùƒ Ù…Ø«Ù„ Ø¸ÙØ±Ùƒ",
        hint:"Ø¯Ø¹ÙˆØ© Ù„Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø°Ø§Øª",
        explanation:"ÙŠØ´Ø¬Ø¹ Ø§Ù„Ù…Ø«Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø¨Ù†ÙØ³Ùƒ Ù„Ø£Ù†Ùƒ Ø§Ù„Ø£Ø­Ø±Øµ Ø¹Ù„Ù‰ Ù…ØµÙ„Ø­ØªÙƒ ÙˆØ§Ù„Ø£Ù‚Ø¯Ø± Ø¹Ù„Ù‰ Ø¥Ø¯Ø±Ø§Ùƒ Ø­Ø§Ø¬ØªÙƒ.",
        lesson:"Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© ØªÙØ®ØªØµØ± Ø¨Ù‡Ø§ Ø§Ù„Ø·Ø±Ù‚ ÙˆØªØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ø¬Ø§Ø­Ø§Øª.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ ÙØµÙŠØ­"
      },
      {
        t:"Ø®ÙŠØ± Ø§Ù„ÙƒÙ„Ø§Ù… Ù…Ø§ Ù‚Ù„ ÙˆØ¯Ù„",
        hint:"ÙŠØªØ¹Ù„Ù‚ Ø¨ÙØµØ§Ø­Ø© Ø§Ù„ØªØ¹Ø¨ÙŠØ±",
        explanation:"ÙŠØ­ÙØ« Ø§Ù„Ù…Ø«Ù„ Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„Ù…Ø§Øª Ù‚Ù„ÙŠÙ„Ø© Ù„ÙƒÙ†Ù‡Ø§ Ù…Ø¹Ø¨Ø±Ø© ÙˆÙˆØ§Ø¶Ø­Ø© Ø¨Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ù„Ø© Ø§Ù„Ù…Ù…Ù„Ø©.",
        lesson:"Ø§Ù„Ø¥ÙŠØ¬Ø§Ø² Ø§Ù„ÙˆØ§Ø¶Ø­ ÙŠØ¨Ù†ÙŠ ØªÙˆØ§ØµÙ„Ù‹Ø§ Ø£Ù‚ÙˆÙ‰ ÙˆØ£ÙƒØ«Ø± ØªØ£Ø«ÙŠØ±Ù‹Ø§.",
        source:"Ø­ÙƒÙ…Ø© Ø¹Ø±Ø¨ÙŠØ© Ù‚Ø¯ÙŠÙ…Ø©"
      },
      {
        t:"Ø§Ù„Ø®Ø¨Ø± Ø§Ù„ÙŠ Ø§Ù†Ù‡Ø±Ø¯Ù‡ Ø¨ÙÙ„ÙˆØ³ Ø¨ÙƒØ±Ø© ÙŠØ¨Ù‚Ù‰ Ø¨Ø¨Ù„Ø§Ø´",
        hint:"ÙŠØªÙ†Ø§ÙˆÙ„ Ø³Ø±Ø¹Ø© Ø§Ù†ØªØ´Ø§Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±",
        explanation:"ÙŠÙÙ‚Ø§Ù„ Ø¹Ù† Ø£Ø³Ø±Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªÙŠ Ø³Ø±Ø¹Ø§Ù† Ù…Ø§ ÙŠØ¹Ø±ÙÙ‡Ø§ Ø§Ù„Ø¬Ù…ÙŠØ¹ØŒ ÙÙ„Ø§ Ø¬Ø¯ÙˆÙ‰ Ù…Ù† Ø´Ø±Ø§Ø¡ Ù…Ø§ Ø³ÙŠØ´ÙŠØ¹ Ø¨Ù„Ø§ Ø«Ù…Ù†.",
        lesson:"Ø§Ù„Ø­Ø°Ø± Ù…Ù† Ø§Ù„ØªØ³Ø±ÙŠØ¨ ÙˆØªÙ‚Ø¯ÙŠØ± Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© ÙÙŠ ÙˆÙ‚ØªÙ‡Ø§.",
        source:"Ù…Ø«Ù„ Ø´Ø¹Ø¨ÙŠ Ù…ØµØ±ÙŠ"
      },
      {
        t:"Ù…Ù† Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù„Ø§ Ø³Ù‡Ø± Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ",
        hint:"ÙŠØªØ­Ø¯Ø« Ø¹Ù† Ø§Ù„Ø§Ø¬ØªÙ‡Ø§Ø¯",
        explanation:"ÙŠØ¯Ø¹Ùˆ Ø§Ù„Ù…Ø«Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø«Ø§Ø¨Ø±Ø© ÙˆØ¨Ø°Ù„ Ø§Ù„Ø¬Ù‡Ø¯ Ø§Ù„Ø·ÙˆÙŠÙ„ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø³Ø§Ù…ÙŠØ©.",
        lesson:"Ø§Ù„Ø·Ù…ÙˆØ­ ÙŠØªØ­Ù‚Ù‚ Ø¨Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„ØµØ¨Ø± Ù„Ø§ Ø¨Ø§Ù„ØªÙ…Ù†ÙŠ.",
        source:"Ø­ÙƒÙ…Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©"
      },
      {
        t:"Ø§Ù„ÙŠ Ø¨ÙŠØ´ÙŠÙ„ Ù‚Ø±Ø¨Ø© Ù…Ø®Ø±ÙˆÙ…Ø© Ø¨ØªØ®Ø± Ø¹Ù„Ù‰ Ø±Ø§Ø³Ù‡",
        hint:"ØªØ­Ø°ÙŠØ± Ù…Ù† Ø§Ù„Ø¥Ù‡Ù…Ø§Ù„",
        explanation:"ÙŠØ¶Ø±Ø¨ Ù„Ù…Ù† ÙŠØªÙ‡Ø§ÙˆÙ† ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø®Ù„Ù„ ÙÙŠØ¹ÙˆØ¯ Ø¹Ù„ÙŠÙ‡ Ø¨Ø§Ù„Ø®Ø³Ø§Ø±Ø© ÙˆØ§Ù„Ù…Ø´Ù‚Ø©.",
        lesson:"Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØµØºÙŠØ±Ø© Ù…Ø¨ÙƒØ±Ù‹Ø§ ÙŠÙ…Ù†Ø¹ ÙƒÙˆØ§Ø±Ø« Ø£ÙƒØ¨Ø± Ù„Ø§Ø­Ù‚Ù‹Ø§.",
        source:"Ù…Ø«Ù„ Ø´Ø¹Ø¨ÙŠ Ø´Ø§Ù…Ù„ÙŠ"
      },
      {
        t:"Ø§Ø¯ÙŠ Ø§Ù„Ø¹ÙŠØ´ Ù„Ø®Ø¨Ø§Ø²Ù‡ ÙˆÙ„Ùˆ ÙƒÙ„ Ù†ØµÙ‡",
        hint:"ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„ØªØ®ØµØµ",
        explanation:"ÙŠÙˆØµÙŠ Ø§Ù„Ù…Ø«Ù„ Ø¨Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„Ø£Ù…ÙˆØ± Ù„Ø£Ù‡Ù„ Ø§Ù„Ø®Ø¨Ø±Ø© Ø­ØªÙ‰ Ù„Ùˆ ÙƒÙ„Ù Ø§Ù„Ø£Ù…Ø±Ø› ÙØ§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªÙƒÙˆÙ† Ø£Ø¶Ù…Ù† ÙˆØ£Ø¬ÙˆØ¯.",
        lesson:"Ø§Ù„Ø«Ù‚Ø© Ø¨Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† ØªØ¶Ù…Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª ÙˆØªØ®ØªØµØ± Ø§Ù„ÙˆÙ‚Øª.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ø¯Ø§Ø±Ø¬"
      },
      {
        t:"Ù„Ø§ ØªØ¤Ø¬Ù„ Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ… Ø¥Ù„Ù‰ Ø§Ù„ØºØ¯",
        hint:"Ù…Ø­Ø§Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙŠÙ",
        explanation:"ÙŠÙ†Ø¨Ù‡ Ø§Ù„Ù…Ø«Ù„ Ø¥Ù„Ù‰ Ø®Ø·ÙˆØ±Ø© ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ù„Ø£Ù† ØªØ±Ø§ÙƒÙ…Ù‡Ø§ ÙŠØ³Ø¨Ø¨ Ø¶ÙŠØ§Ø¹ Ø§Ù„ÙØ±Øµ ÙˆØ§Ù„Ø§Ø¶Ø·Ø±Ø§Ø¨.",
        lesson:"Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙÙˆØ±ÙŠ ÙŠÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆÙŠÙ‚Ù„Ù„ Ø§Ù„ØªÙˆØªØ±.",
        source:"Ø­ÙƒÙ…Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© Ø¹Ø§Ù„Ù…ÙŠØ©"
      },
      {
        t:"Ø§Ù„ÙˆÙ‚Øª ÙƒØ§Ù„Ø³ÙŠÙ Ø§Ù† Ù„Ù… ØªÙ‚Ø·Ø¹Ù‡ Ù‚Ø·Ø¹Ùƒ",
        hint:"ÙŠØ¤ÙƒØ¯ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø²Ù…Ù†",
        explanation:"ÙŠØ´Ø¨Ù‡ Ø§Ù„Ù…Ø«Ù„ Ø§Ù„ÙˆÙ‚Øª Ø¨Ø§Ù„Ø³ÙŠÙ Ø§Ù„Ø­Ø§Ø¯ Ø§Ù„Ø°ÙŠ Ø¥Ù† Ù„Ù… Ù†Ø­Ø³Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø³ÙŠÙˆÙ‚Ø¹ Ø¨Ù†Ø§ Ø§Ù„Ø®Ø³Ø§Ø±Ø©.",
        lesson:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ù…Ø­ÙˆØ± Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„ØªÙÙˆÙ‚ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø©.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù…Ø£Ø«ÙˆØ±"
      },
      {
        t:"Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±Ø¬",
        hint:"ÙŠØ¯Ø¹Ùˆ Ù„Ù„ØªØ±ÙŠØ«",
        explanation:"ÙŠØ¹Ù„Ù…Ù†Ø§ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø¶ÙŠÙ‚ Ø§Ù„Ù„Ø­Ø¸Ø© Ù„Ø§ ÙŠØ¯ÙˆÙ… ÙˆØ£Ù† Ø§Ù„ØµØ¨Ø± ÙŠÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© ÙˆØºÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©.",
        lesson:"Ø§Ù„Ù‡Ø¯ÙˆØ¡ ÙˆØ§Ù„Ø«Ø¨Ø§Øª ÙŠÙ…Ù†Ø­Ø§Ù†Ù†Ø§ Ø±Ø¤ÙŠØ© Ø£ÙˆØ¶Ø­ Ù„Ù„ÙØ±Øµ Ø§Ù„Ù…Ø®ØªØ¨Ø¦Ø©.",
        source:"Ø­ÙƒÙ…Ø© Ø¹Ø±Ø¨ÙŠØ© Ø±ÙˆØ­Ø§Ù†ÙŠØ©"
      },
      {
        t:"Ù…Ù† Ø¬Ø¯ ÙˆØ¬Ø¯ ÙˆÙ…Ù† Ø²Ø±Ø¹ Ø­ØµØ¯",
        hint:"ÙŠØ±ØªØ¨Ø· Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ø§Ø¯",
        explanation:"ÙŠØ¬Ù…Ø¹ Ø§Ù„Ù…Ø«Ù„ Ø¨ÙŠÙ† Ø¨Ø°Ù„ Ø§Ù„Ø¬Ù‡Ø¯ ÙˆÙ‚Ø·Ù Ø§Ù„Ø«Ù…Ø§Ø± ÙƒØ¹Ù„Ø§Ù‚Ø© Ø³Ø¨Ø¨ÙŠØ© Ù„Ø§ Ù…ÙØ± Ù…Ù†Ù‡Ø§.",
        lesson:"Ø§Ù„Ø§Ø¬ØªÙ‡Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø± ÙŠØ«Ù…Ø± Ù…Ù‡Ù…Ø§ Ø·Ø§Ù„ Ø§Ù„Ø²Ù…Ù†.",
        source:"Ù‚ÙˆÙ„ Ù…Ø£Ø«ÙˆØ± ÙÙŠ Ø§Ù„ØªØ±Ø¨ÙŠØ©"
      },
      {
        t:"ÙÙŠ Ø§Ù„ØªØ£Ù†ÙŠ Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆÙÙŠ Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ù†Ø¯Ø§Ù…Ø©",
        hint:"ÙŠØ­Ø°Ø± Ù…Ù† Ø§Ù„ØªØ³Ø±Ø¹",
        explanation:"ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø§Ù„ØªØ£Ù†ÙŠ ÙŠÙ…Ù†Ø­ Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ø¹Ø¬Ù„Ø© ØºÙŠØ± Ø§Ù„Ù…Ø­Ø³ÙˆØ¨Ø© ØªØ¬Ø± Ø§Ù„Ù†Ø¯Ù….",
        lesson:"Ø§Ù„ØªØ±ÙˆÙ‘ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù…ØµÙŠØ±ÙŠØ© ÙŠØ¬Ù†Ù‘Ø¨ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ÙƒØ¨ÙŠØ±Ø©.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù…Ø´ØªØ±Ùƒ"
      },
      {
        t:"Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ù‚Ù„ Ù†Ù‚Øµ Ø§Ù„ÙƒÙ„Ø§Ù…",
        hint:"ÙŠÙ…Ø¬Ø¯ Ø§Ù„ØµÙ…Øª Ø§Ù„Ø­ÙƒÙŠÙ…",
        explanation:"ÙŠØ±Ù‰ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø­ÙƒÙ…Ø© ÙŠØ¬Ø¹Ù„ ØµØ§Ø­Ø¨Ù‡Ø§ Ù‚Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ„Ø§Ù… Ù„Ø£Ù†Ù‡ ÙŠØ²Ù† Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª.",
        lesson:"Ø§Ù„ÙˆØ¹ÙŠ Ø¨Ø°Ø§ØªÙƒ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ®ØªØ§Ø± ÙƒÙ„Ù…Ø§ØªÙƒ Ø¨Ø¹Ù†Ø§ÙŠØ©.",
        source:"Ø­ÙƒÙ…Ø© Ù…Ù†Ø³ÙˆØ¨Ø© Ù„Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ"
      },
      {
        t:"Ø¥Ø°Ø§ Ø¹Ø±Ù Ø§Ù„Ø³Ø¨Ø¨ Ø¨Ø·Ù„ Ø§Ù„Ø¹Ø¬Ø¨",
        hint:"Ø¹Ù† ÙÙ‡Ù… Ø§Ù„Ø®Ù„ÙÙŠØ§Øª",
        explanation:"ÙŠØ¤ÙƒØ¯ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ ØªØ²ÙŠÙ„ Ø§Ù„ØºØ±Ø§Ø¨Ø© ÙˆØªÙƒØ´Ù Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«.",
        lesson:"Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« ÙŠÙ…Ù†Ø­Ù†Ø§ Ø­Ù„Ø§Ù‹ Ø£Ø¯Ù‚ ÙˆÙ‚Ø±Ø§Ø±Ù‹Ø§ Ø£ØµÙˆØ¨.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù‚Ø¯ÙŠÙ…"
      },
      {
        t:"Ø¯Ø±Ù‡Ù… ÙˆÙ‚Ø§ÙŠØ© Ø®ÙŠØ± Ù…Ù† Ù‚Ù†Ø·Ø§Ø± Ø¹Ù„Ø§Ø¬",
        hint:"ÙŠØ´Ø¬Ø¹ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©",
        explanation:"ÙŠØ¯Ø¹Ùˆ Ø§Ù„Ù…Ø«Ù„ Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø®Ø·Ø± Ù‚Ø¨Ù„ ÙˆÙ‚ÙˆØ¹Ù‡ Ù„Ø£Ù† Ø§Ù„Ø¹Ù„Ø§Ø¬ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…ÙƒÙ„Ù ÙˆÙ…ÙØ±Ù‡Ù‚.",
        lesson:"Ø§Ù„Ø§Ø³ØªØ¨Ø§Ù‚ ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· ÙŠÙ‚Ù„Ù„Ø§Ù† Ø§Ù„Ø®Ø³Ø§Ø¦Ø± Ø§Ù„Ù…Ø§Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø¹Ù†ÙˆÙŠØ©.",
        source:"Ø­ÙƒÙ…Ø© Ø·Ø¨ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©"
      },
      {
        t:"Ù„Ø§ ÙŠÙ…ÙˆØª Ø§Ù„Ø°Ø¦Ø¨ ÙˆÙ„Ø§ ØªÙÙ†Ù‰ Ø§Ù„ØºÙ†Ù…",
        hint:"ÙŠØ±ØµØ¯ Ø§Ù„ØªØ¹Ø§Ø±Ø¶ Ø¨ÙŠÙ† Ù…ØµÙ„Ø­ØªÙŠÙ†",
        explanation:"ÙŠØ¶Ø±Ø¨ Ù„Ù…Ù† ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ù…ØªØ¶Ø§Ø¯ÙŠÙ† Ø¯ÙˆÙ† ØªØ¶Ø­ÙŠØ©ØŒ ÙˆÙ‡Ùˆ Ø£Ù…Ø± Ù…Ø³ØªØ­ÙŠÙ„ ØºØ§Ù„Ø¨Ù‹Ø§.",
        lesson:"Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø§Ø¯Ø© ØªØ³ØªÙ„Ø²Ù… Ø§Ø®ØªÙŠØ§Ø±Ù‹Ø§ ÙˆØ§Ø¶Ø­Ù‹Ø§ ÙˆØªØ¶Ø­ÙŠØ© Ù…Ø­Ø³ÙˆØ¨Ø©.",
        source:"Ù…Ø«Ù„ Ø¨Ø¯ÙˆÙŠ"
      },
      {
        t:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙ„Ø§Ù… Ù…Ù† ÙØ¶Ø© ÙØ§Ù„Ø³ÙƒÙˆØª Ù…Ù† Ø°Ù‡Ø¨",
        hint:"ÙŠÙØ§Ø¶Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙƒÙ„Ø§Ù… ÙˆØ§Ù„ØµÙ…Øª",
        explanation:"ÙŠØ´Ø¯Ø¯ Ø§Ù„Ù…Ø«Ù„ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ø§Ù„ØµÙ…Øª ÙÙŠ Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø­ÙƒÙ…Ø© Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„Ø²Ø§Ø¦Ø¯.",
        lesson:"Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ÙƒÙ„Ø§Ù… Ù…Ù‡Ø§Ø±Ø© Ù‚ÙŠØ§Ø¯ÙŠØ© Ù…Ù‡Ù…Ø©.",
        source:"Ù‚ÙˆÙ„ Ù…Ø£Ø«ÙˆØ± Ø¹Ø±Ø¨ÙŠ"
      },
      {
        t:"Ø±Ø¨ Ø¶Ø§Ø±Ø© Ù†Ø§ÙØ¹Ø©",
        hint:"ÙŠØ±Ù‰ Ø§Ù„Ø®ÙŠØ± ÙÙŠ Ø§Ù„Ø§Ø¨ØªÙ„Ø§Ø¡",
        explanation:"ÙŠÙˆØ¶Ø­ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø§Ù„Ù…ØµØ§Ø¦Ø¨ Ù‚Ø¯ ØªØ­Ù…Ù„ ÙÙŠ Ø·ÙŠØ§ØªÙ‡Ø§ ÙØ±ØµÙ‹Ø§ ÙˆØ£Ù„Ø·Ø§ÙÙ‹Ø§ Ù„Ø§ Ù†Ø±Ø§Ù‡Ø§ Ù„Ù„ÙˆÙ‡Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.",
        lesson:"ØªØºÙŠÙŠØ± Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù†Ø¸Ø± ÙŠØ­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø­Ù† Ø¥Ù„Ù‰ Ù…Ù†Ø­ ÙˆØ¹Ø¨Ø±.",
        source:"Ø­ÙƒÙ…Ø© Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©"
      },
      {
        t:"Ø§Ù„Ø¹Ù„Ù… Ù†ÙˆØ±",
        hint:"ÙŠÙØ´ÙŠØ¯ Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ©",
        explanation:"ÙŠØ´Ø¨Ù‡ Ø§Ù„Ù…Ø«Ù„ Ø§Ù„Ø¹Ù„Ù… Ø¨Ø§Ù„Ù†ÙˆØ± Ø§Ù„Ø°ÙŠ ÙŠØ¨Ø¯Ø¯ Ø§Ù„Ø¸Ù„Ø§Ù… ÙˆÙŠÙ‡Ø¯ÙŠ Ø§Ù„Ø¹Ù‚ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ§Ø¨.",
        lesson:"Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø± ÙŠÙØªØ­ Ø§Ù„Ø¢ÙØ§Ù‚ ÙˆÙŠØµÙˆÙ† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù…Ù† Ø§Ù„Ø¬Ù‡Ù„.",
        source:"Ù‚ÙˆÙ„ ØªØ±Ø¨ÙˆÙŠ Ù…Ø£Ø«ÙˆØ±"
      },
      {
        t:"Ù„ÙŠØ³ Ø§Ù„ÙØªÙ‰ Ù…Ù† Ù‚Ø§Ù„ ÙƒØ§Ù† Ø£Ø¨ÙŠ",
        hint:"ÙŠØ­Ø« Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø´Ø®ØµÙŠ",
        explanation:"ÙŠØ±ÙØ¶ Ø§Ù„Ù…Ø«Ù„ Ø§Ù„Ø§ØªÙƒØ§Ø¡ Ø¹Ù„Ù‰ Ø£Ù…Ø¬Ø§Ø¯ Ø§Ù„Ø¢Ø¨Ø§Ø¡ ÙˆÙŠØ¯Ø¹Ùˆ Ù„ØµÙ†Ø§Ø¹Ø© Ù…Ø¬Ø¯ Ø°Ø§ØªÙŠ.",
        lesson:"Ù‡ÙˆÙŠØ© Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ØªØ¨Ù†Ù‰ Ø¨Ø¬Ù‡Ø¯Ù‡ Ù„Ø§ Ø¨Ù†Ø³Ø¨Ù‡ ÙØ­Ø³Ø¨.",
        source:"Ø¨ÙŠØª Ù…Ù† Ø´Ø¹Ø± Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ"
      },
      {
        t:"Ù…Ù† Ø´Ø¨ Ø¹Ù„Ù‰ Ø´ÙŠØ¡ Ø´Ø§Ø¨ Ø¹Ù„ÙŠÙ‡",
        hint:"ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø¹Ø§Ø¯Ø§Øª",
        explanation:"ÙŠØ¤ÙƒØ¯ Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ù…Ø§ ÙŠÙ†Ø´Ø£ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ÙÙŠ ØµØºØ±Ù‡ ÙŠØ³ØªÙ…Ø± ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø¹Ù‡ Ø­ØªÙ‰ Ø§Ù„ÙƒØ¨Ø±.",
        lesson:"ØªØ´ÙƒÙŠÙ„ Ø§Ù„Ø¹Ø§Ø¯Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ù…Ø¨ÙƒØ±Ù‹Ø§ Ø§Ø³ØªØ«Ù…Ø§Ø± Ø·ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…Ø¯.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ø¯Ø§Ø±Ø¬"
      },
      {
        t:"Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙŠÙƒØ±Ù… Ø§Ù„Ù…Ø±Ø¡ Ø£Ùˆ ÙŠÙ‡Ø§Ù†",
        hint:"Ø¹Ù† Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø­Ø³Ù…",
        explanation:"ÙŠØ´ÙŠØ± Ø§Ù„Ù…Ø«Ù„ Ø¥Ù„Ù‰ Ø£Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙƒØ´Ù Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¬Ø¯ÙŠØ©.",
        lesson:"Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø± ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø­Ø§Ø³Ù…Ø© ÙØ±ØµØ© Ù„Ù„ØªØ£Ù„Ù‚.",
        source:"Ø­ÙƒÙ…Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©"
      },
      {
        t:"Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø£Ù† ØªØ·Ø§Ø¹ ÙØ£Ù…Ø± Ø¨Ù…Ø§ ÙŠØ³ØªØ·Ø§Ø¹",
        hint:"ÙŠÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø·Ù…ÙˆØ­ ÙˆØ§Ù„Ù‚Ø¯Ø±Ø©",
        explanation:"ÙŠØ¹Ù„Ù… Ø§Ù„Ù…Ø«Ù„ Ø§Ù„Ù‚Ø§Ø¯Ø© Ø£Ù† Ø§Ù„ØªÙƒÙ„ÙŠÙ Ø¨Ù…Ø§ ÙÙˆÙ‚ Ø§Ù„Ø·Ø§Ù‚Ø© ÙŠÙˆÙ„Ø¯ Ø§Ù„Ø¹ØµÙŠØ§Ù†ØŒ Ø£Ù…Ø§ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© ÙØªØ¬Ù„Ø¨ Ø§Ù„Ø·Ø§Ø¹Ø©.",
        lesson:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­ÙƒÙŠÙ…Ø© ØªØ±Ø§Ø¹ÙŠ Ø·Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙŠÙ‚ ÙˆØ­Ø¯ÙˆØ¯ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯.",
        source:"Ù‚ÙˆÙ„ Ù…Ù†Ø³ÙˆØ¨ Ù„Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨"
      },
      {
        t:"Ø¹Ù„Ù‰ Ù‚Ø¯Ø± Ø£Ù‡Ù„ Ø§Ù„Ø¹Ø²Ù… ØªØ£ØªÙŠ Ø§Ù„Ø¹Ø²Ø§Ø¦Ù…",
        hint:"Ø¹Ù† Ù‚ÙˆØ© Ø§Ù„Ø¥Ø±Ø§Ø¯Ø©",
        explanation:"ÙŠØ´ÙŠØ± Ø§Ù„Ø¨ÙŠØª Ø¥Ù„Ù‰ Ø£Ù† Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ù„Ø§ ÙŠÙ†Ù‡Ø¶ Ø¨Ù‡Ø§ Ø¥Ù„Ø§ Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù‡Ù…Ù… Ø§Ù„Ø¹Ø§Ù„ÙŠØ©.",
        lesson:"Ø·Ù…ÙˆØ­Ùƒ ÙŠØ­Ø¯Ø¯ Ø­Ø¬Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ­Ù‚Ù‚Ù‡.",
        source:"Ù…Ù† Ù‚ØµÙŠØ¯Ø© Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ"
      },
      {
        t:"Ø§Ù„Ø·ÙŠÙˆØ± Ø¹Ù„Ù‰ Ø£Ø´ÙƒØ§Ù„Ù‡Ø§ ØªÙ‚Ø¹",
        hint:"ÙŠØªÙ†Ø§ÙˆÙ„ ØµØ­Ø¨Ø© Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡ÙŠÙ†",
        explanation:"ÙŠÙ‚ÙˆÙ„ Ø§Ù„Ù…Ø«Ù„ Ø¥Ù† Ø§Ù„Ø£ÙØ±Ø§Ø¯ ÙŠÙ…ÙŠÙ„ÙˆÙ† Ø¥Ù„Ù‰ Ù…Ù† ÙŠØ´Ø¨Ù‡ÙˆÙ†Ù‡Ù… ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹ ÙˆØ§Ù„Ù‚ÙŠÙ….",
        lesson:"Ø§Ø®ØªØ± Ù…Ø­ÙŠØ·Ùƒ Ø¨Ø¹Ù†Ø§ÙŠØ© Ù„Ø£Ù†Ù‡ ÙŠØ¹ÙƒØ³Ùƒ ÙˆÙŠØ¤Ø«Ø± Ø¹Ù„ÙŠÙƒ.",
        source:"Ù…Ø«Ù„ Ø¹Ø§Ù„Ù…ÙŠ Ù…ØªØ±Ø¬Ù…"
      },
      {
        t:"Ù…Ù† Ø³Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¨ ÙˆØµÙ„",
        hint:"ÙŠØªØ­Ø¯Ø« Ø¹Ù† Ø§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©",
        explanation:"ÙŠØ¬Ø³Ø¯ Ø§Ù„Ù…Ø«Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø±ØºÙ… Ø·ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø­ØªÙ‰ Ù†Ø¨Ù„Øº Ø§Ù„Ù‡Ø¯Ù.",
        lesson:"Ø§Ù„Ù…ÙˆØ§Ø¸Ø¨Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„ØµØºÙŠØ±Ø© ØªØµÙ†Ø¹ Ø¥Ù†Ø¬Ø§Ø²Ù‹Ø§ Ø¹Ø¸ÙŠÙ…Ù‹Ø§ Ù…Ø¹ Ø§Ù„Ø²Ù…Ù†.",
        source:"Ø­ÙƒÙ…Ø© ØªØ·ÙˆÙŠØ± Ø°Ø§Øª"
      },
      {
        t:"Ø±Ø­Ù… Ø§Ù„Ù„Ù‡ Ø§Ù…Ø±Ø¡ Ø¹Ø±Ù Ù‚Ø¯Ø± Ù†ÙØ³Ù‡",
        hint:"Ø­ÙˆÙ„ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø°Ø§Øª",
        explanation:"ÙŠØ´Ø¬Ø¹ Ø§Ù„Ù…Ø«Ù„ Ø¹Ù„Ù‰ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù„Ø·Ø§Ù‚ØªÙ‡ ÙˆØ­Ø¯ÙˆØ¯Ù‡ Ø­ØªÙ‰ Ù„Ø§ ÙŠØ¸Ù„Ù… Ù†ÙØ³Ù‡ ÙˆÙ„Ø§ ÙŠØªØ¬Ø§ÙˆØ² Ù‚Ø¯Ø±ØªÙ‡.",
        lesson:"Ø§Ù„ÙˆØ¹ÙŠ Ø¨Ø§Ù„Ø°Ø§Øª ÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨Ùƒ Ù…Ù† ÙØ±Øµ ÙˆÙ…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª.",
        source:"Ù‚ÙˆÙ„ Ù…Ø£Ø«ÙˆØ± Ø¹Ù† Ø¹Ù…Ø± Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø²ÙŠØ²"
      },
      {
        t:"Ø§Ù„Ù‚Ù†Ø§Ø¹Ø© ÙƒÙ†Ø² Ù„Ø§ ÙŠÙÙ†Ù‰",
        hint:"ÙŠØ¯Ø¹Ùˆ Ù„Ù„Ø±Ø¶Ø§",
        explanation:"ÙŠØ¨ÙŠÙ† Ø§Ù„Ù…Ø«Ù„ Ø£Ù† Ø§Ù„Ù‚Ù†Ø§Ø¹Ø© Ø«Ø±ÙˆØ© Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ø§ ØªÙ†ØªÙ‡ÙŠØŒ Ù„Ø£Ù†Ù‡Ø§ ØªÙ…Ù†Ø­ ØµØ§Ø­Ø¨Ù‡Ø§ Ø±Ø§Ø­Ø© Ù†ÙØ³ÙŠØ© Ù…Ø³ØªØ¯Ø§Ù…Ø©.",
        lesson:"ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù†Ø¹Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙŠØ¬Ù„Ø¨ Ø§Ù„Ø³ÙƒÙŠÙ†Ø© ÙˆÙŠØ­ÙØ² Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ØªÙˆØ§Ø²Ù†.",
        source:"Ù…Ø«Ù„ Ø¹Ø±Ø¨ÙŠ Ù…ØªØ¯Ø§ÙˆÙ„"
      },
      {
        t:"Ø¥Ù† Ù…Ø¹ Ø§Ù„Ø¹Ø³Ø± ÙŠØ³Ø±Ø§",
        hint:"Ù…Ø³ØªÙ…Ø¯ Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†",
        explanation:"ÙŠØ±Ø³Ø® Ø§Ù„Ù…Ø«Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ Ø­Ù‚ÙŠÙ‚Ø© Ø£Ù† Ø§Ù„Ø¶ÙŠÙ‚ ÙŠØªØ¨Ø¹Ù‡ ÙØ±Ø¬ Ù…Ø²Ø¯ÙˆØ¬ Ù„Ù…Ù† ÙŠØµØ¨Ø± ÙˆÙŠØ£Ù…Ù„.",
        lesson:"Ø§Ù„Ø£Ù…Ù„ ÙˆØ§Ù„Ø«Ù‚Ø© Ø¨Ø§Ù„Ù„Ù‡ ÙŠØ«Ø¨ØªØ§Ù† Ø§Ù„Ù‚Ù„Ø¨ ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ØµØ§Ø¹Ø¨.",
        source:"Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… â€” Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø­"
      }
    ];
	
    const AR_ALPHA = ['Ø§','Ø¨','Øª','Ø«','Ø¬','Ø­','Ø®','Ø¯','Ø°','Ø±','Ø²','Ø³','Ø´','Øµ','Ø¶','Ø·','Ø¸','Ø¹','Øº','Ù','Ù‚','Ùƒ','Ù„','Ù…','Ù†','Ùˆ','Ù‡','Ø©','Ø¡','ÙŠ','Ù‰'];
    const norm = (ch)=> String(ch).replace(/[Ø£Ø¥Ø¢]/g,'Ø§');

    const SOUND_EFFECTS = {
      correct: 'https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3',
      wrong: 'https://assets.mixkit.co/sfx/preview/mixkit-failure-arcade-alert-notification-240.mp3',
      win: 'https://assets.mixkit.co/sfx/preview/mixkit-small-crowd-cheer-and-applause-518.mp3',
      lose: 'https://assets.mixkit.co/sfx/preview/mixkit-game-over-dark-2068.mp3'
    };


    // ================================================================
    // Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ØªØ³ÙˆÙŠØ© (ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¬Ø³Ø¯)
    // Ù‡Ù†Ø§ Ù†ØµÙ†Ø¹ Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙˆØ§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚.
    // ================================================================

    // ----------------------------------------------------------------
    // Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø·ÙŠÙ† ÙˆØ§Ù„Ø°Ø±Ø§Øª (`Atoms` as Components)
    // Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§ØªØŒ Ù„Ø¨Ù†Ø§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ´ÙƒÙ„ Ø¬Ø³Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.
    // ÙƒÙ„ Ù…ÙƒÙˆÙ† Ù‡Ùˆ "Ø°Ø±Ø©" Ø£Ùˆ Ù…Ø¬Ù…ÙˆØ¹Ø© "Ø°Ø±Ø§Øª" Ù„Ù‡Ø§ Ø´ÙƒÙ„ ÙˆÙˆØ¸ÙŠÙØ© Ù…Ø­Ø¯Ø¯Ø©.
    // ----------------------------------------------------------------
    
    function HeaderBar(db){
      const { TL } = makeLangLookup(db);
      return D.Containers.Header({ attrs:{ class: tw`px-6 pt-6 pb-4` }}, [
        D.Containers.Div({ attrs:{ class: tw`mx-auto w-full max-w-[1600px]` }}, [
          D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-6 space-y-5`} glass-panel glow-outline` }}, [
            D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center justify-between gap-4` }}, [
              D.Text.Span({ attrs:{ class: tw`text-xl sm:text-2xl font-bold tracking-tight` }}, [TL('app.title')]),
              D.Containers.Div({ attrs:{ class: tw`flex items-center gap-2` }}, [
                UI.Button({ attrs:{ gkey:'ui:lang-ar' }, variant:'ghost', size:'sm' }, ['AR']),
                UI.Button({ attrs:{ gkey:'ui:lang-en' }, variant:'ghost', size:'sm' }, ['EN']),
                UI.Button({ attrs:{ gkey:'ui:theme-toggle' }, variant:'soft', size:'sm' }, ['ðŸŒ“'])
              ])
            ]),
            D.Text.Span({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('header.subtitle')])
          ])
        ])
      ]);
    }

    function Sidebar(db){
      const { TL } = makeLangLookup(db);
      const route = db.data.activeTab;
      const NavBtn = (id,label,icon)=>{
        const active = route===id;
        return UI.Button({
          attrs:{
            gkey:`route:${id}`,
            class:`${tw`w-full justify-start text-start rounded-2xl transition-all duration-200`} glass-panel ${active ? 'glow-outline' : 'hover:opacity-90'} ${active?'':'opacity-85'}`
          },
          variant:'ghost', size:'sm'
        }, [`${icon} `, TL(label)]);
      };
      return D.Containers.Div({ attrs:{ class: tw`space-y-4` }}, [
        D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-4 space-y-3`} glass-panel glow-outline` }}, [
          D.Text.Span({ attrs:{ class: tw`text-sm uppercase tracking-[0.3em] text-[var(--muted-foreground)]` }}, [TL('nav.menu')]),
          D.Containers.Nav({ attrs:{ class: tw`space-y-3` }}, [
            NavBtn('readmeBase','nav.readmeBase','ðŸŒŒ'),
            NavBtn('readmeTec','nav.readmeTec','ðŸ› ï¸'),
            NavBtn('counter','nav.counter','ðŸ”¢'),
            NavBtn('game','nav.game','ðŸŽ®')
          ])
        ])
      ]);
    }

    function DocPanel(db, kind){
      const lang = db.env.lang || 'ar';
      const key = kind==='tec' ? 'doc.tec.lead' : 'doc.base.lead';
      const titleKey = kind==='tec' ? 'nav.readmeTec' : 'nav.readmeBase';
      const docs = db.data.docs || {};
      const store = kind==='tec' ? docs.tec || {} : docs.base || {};
      const fallback = lang==='ar' ? (store.en || '') : (store.ar || '');
      const content = store[lang] || fallback || '';
      const { TL } = makeLangLookup(db);

      return UI.Card({
        title: TL(titleKey),
        description: TL('doc.language.hint'),
        content: D.Containers.Div({ attrs:{ class: tw`space-y-4` }}, [
          D.Text.P({ attrs:{ class: tw`text-base font-semibold`, style:'color:color-mix(in oklab,var(--foreground) 92%, var(--primary) 8%);' }}, [TL(key)]),
          UI.Markdown({ content, className: tw`md-prose` })
        ])
      });
    }

    function CounterPanel(db){
      const { TL } = makeLangLookup(db);
      return UI.Card({
        title: TL('counter.title'),
        content: D.Containers.Div({ attrs:{ class: tw`flex items-center justify-center gap-3` }}, [
          UI.Button({ attrs:{ gkey:'counter:dec' }, variant:'soft', size:'sm' }, ['âˆ’']),
          D.Text.Span({ attrs:{ class: tw`text-2xl font-bold` }}, [String(db.data.counter)]),
          UI.Button({ attrs:{ gkey:'counter:inc' }, variant:'soft', size:'sm' }, ['+']),
          UI.Button({ attrs:{ gkey:'counter:reset', class:tw`ms-4` }, variant:'ghost', size:'sm' }, [TL('counter.reset')]),
        ])
      });
    }

    function GamePanel(db){
      const { TL } = makeLangLookup(db);
      const g = db.data.game;
      const showSolution = g.revealSolution || g.status==='won';

      const timeValue = !g.timerOn ? null : (g.status==='running'
        ? (typeof g.timeLeft === 'number' ? g.timeLeft : g.timerSec)
        : (g.status==='lost' ? 0 : g.timerSec));
      const timeDisplay = g.timerOn ? `${String(timeValue ?? g.timerSec)} ${TL('game.seconds')}` : 'â€”';
      const pv = g.proverb?.t || '';
      const feedbackType = g.feedback && g.feedback.type ? g.feedback.type : 'idle';
      const feedbackStamp = g.feedback?.stamp || 0;

      const heartsRow = D.Containers.Div({ attrs:{ class: tw`flex items-center justify-center gap-1 sm:gap-2 text-2xl sm:text-3xl drop-shadow` }},
        Array.from({ length:g.triesMax }, (_,i)=>{
          const full = i < g.triesLeft;
          return D.Text.Span({ attrs:{ key:'heart-'+i, class: tw`${full?'':'opacity-35'}` }}, [full ? 'â¤ï¸' : 'ðŸ’”']);
        })
      );

      const statsRow = D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center justify-center gap-2 text-sm` }}, [
        UI.Badge({ attrs:{ class: tw`bg-[var(--surface-2)] text-[var(--muted-foreground)]` }, leading:'â³', text:`${TL('game.timeLabel')}: ${timeDisplay}` }),
        UI.Badge({ attrs:{ class: tw`bg-[var(--surface-2)] text-[var(--muted-foreground)]` }, leading:'â¤ï¸', text:`${TL('game.tries')}: ${g.triesLeft}/${g.triesMax}` }),
        UI.Badge({ attrs:{ class: tw`bg-[var(--surface-2)] text-[var(--muted-foreground)]` }, leading:'ðŸŽ¯', text:`${TL('game.statusLabel')}: ${TL(`game.status.${g.status}`)}` })
      ]);

      const musicTile = D.Containers.Div({ attrs:{ class: 'settings-tile' }}, [
        UI.Badge({ attrs:{ class: tw`bg-transparent text-[var(--muted-foreground)]` }, leading:'ðŸŽµ', text:TL('game.music') }),
        D.Containers.Div({ attrs:{ class: tw`flex items-center gap-2` }}, [
          UI.Input({ attrs:{ type:'checkbox', checked:g.musicOn, gkey:'game:music:toggle' } }),
          D.Text.Span({ attrs:{ class: tw`text-sm` }}, [TL(g.musicOn ? 'game.musicOn' : 'game.musicOff')])
        ]),
        UI.Select({ attrs:{ gkey:'game:music:select', class: tw`min-w-[180px]` }, options: g.audioList.map((it,i)=>({ value:String(i), label:it.name })) })
      ]);

      const timerTile = D.Containers.Div({ attrs:{ class: 'settings-tile' }}, [
        UI.Badge({ attrs:{ class: tw`bg-transparent text-[var(--muted-foreground)]` }, leading:'â±ï¸', text:TL('game.timer') }),
        D.Containers.Div({ attrs:{ class: tw`flex items-center gap-2` }}, [
          UI.Input({ attrs:{ type:'checkbox', checked:g.timerOn, gkey:'game:timer:toggle' } }),
          D.Text.Span({ attrs:{ class: tw`text-sm` }}, [TL(g.timerOn ? 'game.timerOn' : 'game.timerOff')])
        ]),
        D.Containers.Div({ attrs:{ class: tw`flex items-center gap-2` }}, [
          UI.Input({ attrs:{ type:'number', min:'5', step:'1', value:String(g.timerSec), style:'width:92px', gkey:'game:timer:value' } }),
          D.Text.Span({ attrs:{ class: tw`text-xs text-[var(--muted-foreground)]` }}, [TL('game.seconds')])
        ])
      ]);

      const settingsRow = D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-stretch gap-4` }}, [
        musicTile,
        timerTile
      ]);

      const tiles = pv.split('').map((raw, idx)=>{
        if (raw===' ') return D.Containers.Div({ attrs:{ key:'sp'+idx, class: 'letter-space' }});
        const normalized = norm(raw);
        const revealed = !!g.guessed[normalized];
        return D.Containers.Div({
          attrs:{
            key:'bx'+idx,
            class: `${tw`grid place-items-center rounded-2xl text-2xl md:text-3xl font-semibold letter-tile letter-slot`}`,
            'data-revealed': revealed ? 'true' : 'false'
          }
        }, [ revealed ? raw : '' ]);
      });

      const puzzleRow = D.Containers.Div({ attrs:{ class: `${tw`flex flex-wrap justify-center gap-3`} puzzle-row` }}, tiles);

      const letters = D.Containers.Div({ attrs:{ class: `${tw`grid grid-cols-6 sm:grid-cols-8 xl:grid-cols-10 gap-2 letters-grid`}` }}, AR_ALPHA.map((L,i)=>
        UI.Button({
          attrs:{
            key:'L'+i,
            gkey:'game:guess',
            'data-ch':L,
            disabled: g.status!=='running' || !!g.guessed[L],
            class: tw`text-xl sm:text-2xl font-extrabold tracking-wider`
          },
          variant:'soft',
          size:'lg'
        }, [L])
      ));

      const feedbackClass = feedbackType && feedbackType!=='idle' ? ` feedback-${feedbackType}` : '';

      const boardCard = D.Containers.Div({ attrs:{ class: `${tw`space-y-6`} glass-panel glow-outline p-6 rounded-3xl game-board${feedbackClass}` }}, [
        D.Containers.Div({ attrs:{ class: tw`space-y-4` }}, [
          puzzleRow,
          UI.Divider(),
          D.Containers.Div({ attrs:{ class: tw`space-y-2` }}, [
            D.Text.Strong({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('game.letters')]),
            letters
          ])
        ])
      ]);

      const heartsWrap = D.Containers.Div({ attrs:{ class: tw`flex justify-center w-full md:w-auto` }}, [heartsRow]);
      const statsWrap = D.Containers.Div({ attrs:{ class: tw`flex justify-center w-full md:justify-end` }}, [statsRow]);

      const controlCard = D.Containers.Div({ attrs:{ class: `${tw`space-y-6`} glass-panel glow-outline p-6 rounded-3xl` }}, [
        D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center justify-between gap-4` }}, [
          D.Containers.Div({ attrs:{ class: tw`space-y-1` }}, [
            D.Text.H3({ attrs:{ class: tw`text-2xl font-bold` }}, [TL('game.title')]),
            D.Text.Span({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('game.statusLabel'), ': ', TL(`game.status.${g.status}`)])
          ]),
          D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center gap-3` }}, [
            UI.Button({ attrs:{ gkey:'game:start', class: tw`rounded-full px-8 py-3 font-semibold tracking-wide text-base` }, variant:'destructive', size:'lg' }, [g.status==='running' ? TL('game.new') : TL('game.start')])
          ])
        ]),
        settingsRow,
        D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center gap-4` }}, [
          heartsWrap,
          statsWrap
        ])
      ]);

      const feedbackMessages = {
        correct: TL('game.feedback.correct'),
        wrong: TL('game.feedback.wrong'),
        win: TL('game.feedback.win'),
        lose: TL('game.feedback.lose')
      };
      const feedbackIcons = { correct:'âœ…', wrong:'âš ï¸', win:'ðŸ†', lose:'ðŸ’”' };

      const infoItems = [];
      if (feedbackType !== 'idle' && feedbackMessages[feedbackType]){
        infoItems.push(
          D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-5 space-y-3`} glass-panel`, key:'feedback-card' }}, [
            UI.Badge({ attrs:{ class: tw`w-fit` }, leading: feedbackIcons[feedbackType] || 'âœ¨', text:TL('game.lastMove') }),
            D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)] leading-relaxed` }}, [feedbackMessages[feedbackType]])
          ])
        );
      }

      if (g.proverb){
        infoItems.push(
          D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-5 space-y-3`} glass-panel`, key:'hint-card' }}, [
            UI.Badge({ attrs:{ class: tw`w-fit` }, leading:'ðŸ’¡', text:TL('game.hintTitle') }),
            D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)] leading-relaxed` }}, [g.proverb.hint])
          ])
        );
      }

      if (!showSolution && g.status==='lost'){
        infoItems.push(
          D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-5 space-y-4 text-center`} glass-panel`, key:'reveal-card' }}, [
            UI.Badge({ attrs:{ class: tw`w-fit mx-auto` }, leading:'ðŸ™ˆ', text:TL('game.lose') }),
            D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('game.revealPrompt')]),
            UI.Button({ attrs:{ gkey:'game:reveal', class: tw`px-8 py-3 rounded-full font-semibold text-base` }, variant:'soft', size:'lg' }, [TL('game.reveal')])
          ])
        );
      }

      if (showSolution && g.proverb){
        infoItems.push(
          D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-5 space-y-3`} glass-panel`, style:'grid-column: 1 / -1;', key:'solution-card' }}, [
            UI.Badge({ attrs:{ class: tw`w-fit` }, leading:'ðŸ“œ', text:TL('game.solution') }),
            D.Text.P({ attrs:{ class: tw`text-lg font-semibold` }}, [g.proverb.t]),
            D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('game.explanation'), ': ', g.proverb.explanation]),
            D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)]` }}, [TL('game.lesson'), ': ', g.proverb.lesson]),
            D.Text.P({ attrs:{ class: tw`text-xs text-[var(--muted-foreground)]` }}, [TL('game.source'), ': ', g.proverb.source])
          ])
        );
      }

      let infoSection = null;
      if (infoItems.length){
        let infoClass = tw`grid gap-4`;
        if (infoItems.length >= 3) infoClass += ' ' + tw`md:grid-cols-2 xl:grid-cols-3`;
        else if (infoItems.length === 2) infoClass += ' ' + tw`md:grid-cols-2`;
        infoSection = D.Containers.Div({ attrs:{ class: infoClass }}, infoItems);
      }

      const confettiLayer = feedbackType==='win'
        ? D.Containers.Div({ attrs:{ class:'confetti-layer', key:`confetti-${feedbackStamp}` }},
            Array.from({ length: 70 }, (_,i)=>{
              const colors = ['#f97316','#38bdf8','#a855f7','#facc15','#f472b6'];
              const left = (Math.random()*100).toFixed(2);
              const delay = (Math.random()*1.2).toFixed(2);
              return D.Text.Span({ attrs:{ key:`confetti-${i}`, class:'confetti-piece', style:`left:${left}%; background:${colors[i % colors.length]}; animation-delay:${delay}s;` }});
            })
          )
        : null;

      const resultCard = g.status==='won' && g.proverb
        ? D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-6 space-y-4 text-center`} glass-panel celebration-card` }}, [
            D.Containers.Div({ attrs:{ class: `${tw`space-y-3`} game-overlay-content` }}, [
              UI.Badge({ attrs:{ class: tw`w-fit mx-auto` }, leading:'ðŸŽ‰', text:TL('game.overlay.winTitle') }),
              D.Text.P({ attrs:{ class: tw`text-base text-[var(--muted-foreground)]` }}, [TL('game.overlay.winSubtitle')]),
              D.Text.P({ attrs:{ class: tw`text-lg font-semibold` }}, [g.proverb.t]),
              D.Text.P({ attrs:{ class: tw`text-sm text-[var(--muted-foreground)] leading-relaxed` }}, [TL('game.rewardTitle'), ': ', g.proverb.lesson]),
              D.Text.P({ attrs:{ class: tw`text-xs text-[var(--muted-foreground)]` }}, [TL('game.source'), ': ', g.proverb.source]),
              UI.Button({ attrs:{ gkey:'game:start', class: tw`mt-2 px-8 py-3 rounded-full font-semibold` }, variant:'destructive', size:'lg' }, [TL('game.playAgain')])
            ])
          ])
        : g.status==='lost'
        ? D.Containers.Div({ attrs:{ class: `${tw`rounded-3xl p-6 space-y-4 text-center`} glass-panel gameover-card` }}, [
            D.Containers.Div({ attrs:{ class: `${tw`space-y-3`} game-overlay-content` }}, [
              UI.Badge({ attrs:{ class: tw`w-fit mx-auto` }, leading:'ðŸ›‘', text:TL('game.overlay.loseTitle') }),
              D.Text.P({ attrs:{ class: tw`text-base text-[var(--muted-foreground)]` }}, [TL('game.overlay.loseSubtitle')]),
              D.Containers.Div({ attrs:{ class: tw`flex flex-wrap items-center justify-center gap-3 pt-2` }}, [
                UI.Button({ attrs:{ gkey:'game:start', class: tw`px-7 py-3 rounded-full font-semibold` }, variant:'destructive', size:'lg' }, [TL('game.tryAgain')]),
                (!showSolution ? UI.Button({ attrs:{ gkey:'game:reveal', class: tw`px-7 py-3 rounded-full font-semibold` }, variant:'soft', size:'lg' }, [TL('game.reveal')]) : null)
              ].filter(Boolean))
            ])
          ])
        : null;

      const playItems = [resultCard, boardCard].filter(Boolean);
      const playSection = playItems.length > 1
        ? D.Containers.Div({ attrs:{ class: tw`space-y-6` }}, playItems)
        : boardCard;

      const audioNode = (g.musicOn && g.status==='running')
        ? D.Media.Audio({ attrs:{ autoplay:true, loop:true, src:g.audioList[g.audioIdx].url, class: tw`hidden`, key:`bgm-${g.soundStamp||0}` }})
        : null;

      const cueAudio = (feedbackType && feedbackType!=='idle' && SOUND_EFFECTS[feedbackType])
        ? D.Media.Audio({ attrs:{ autoplay:true, src:SOUND_EFFECTS[feedbackType], class: tw`hidden`, key:`cue-${feedbackStamp}` }})
        : null;

      return D.Containers.Div({ attrs:{ class: `${tw`relative space-y-6`} game-panel` }}, [
        confettiLayer,
        controlCard,
        playSection,
        infoSection,
        audioNode,
        cueAudio
      ].filter(Boolean));
    }

    function MainContent(db){
      const tab = db.data.activeTab;
      if (tab==='readmeBase') return DocPanel(db, 'base');
      if (tab==='readmeTec')  return DocPanel(db, 'tec');
      if (tab==='counter') return CounterPanel(db);
      if (tab==='game')    return GamePanel(db);
      return DocPanel(db, 'base');
    }
    
    // ----------------------------------------------------------------
    // Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ù„Ù… Ø§Ù„ÙØ·Ø±ÙŠ (`database` as DNA)
    // Ù‡Ø°Ù‡ Ù‡ÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©ØŒ Ø§Ù„Ø´ÙØ±Ø© Ø§Ù„ÙˆØ±Ø§Ø«ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚.
    // Ù‡ÙŠ ØªØ­Ø¯Ø¯ Ø§Ù„ØµÙØ§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙˆØ§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ØªÙŠ Ø³ÙŠÙØ®Ù„Ù‚ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ø¬Ø³Ø¯.
    // ----------------------------------------------------------------
    const database = {
      env:{ theme:'dark', lang:'ar', dir:'rtl' },
      i18n:{ lang:'ar', fallback:'en', dict },
      data:{
        activeTab: 'readmeBase',
        docs: DOCS,
        counter: 0,
        game:{
          musicOn: true,
          timerOn: true,
          timerSec: 35,
          timeLeft: 0,
          triesMax: 5,
          triesLeft: 5,
          audioList: [
            { name:'Ghost Stories', url:'https://www.fesliyanstudios.com/musicfiles/2020-10-26_-_Ghost_Stories_-_www.FesliyanStudios.com_Steve_Oxen/2020-10-26_-_Ghost_Stories_-_www.FesliyanStudios.com_Steve_Oxen.mp3' },
            { name:'The Unsolved Mystery', url:'https://www.fesliyanstudios.com/musicfiles/2018-07-22_-_The_Unsolved_Murder_-_David_Fesliyan.mp3' },
            { name:'Dark Shadows', url:'https://www.fesliyanstudios.com/musicfiles/2020-06-25_-_Dark_Shadows_-_www.FesliyanStudios.com_David_Fesliyan/2020-06-25_-_Dark_Shadows_-_www.FesliyanStudios.com_David_Fesliyan.mp3' }
          ],
          audioIdx: 0,
          proverb: null,
          guessed: {},
          intervalId: null,
          status: 'idle', // idle | running | won | lost
          revealSolution: false,
          soundStamp: 0,
          feedback: null
        }
      },
      ui:{ modalOpen:false, drawerOpen:false, toasts:[] }
    };

    // ----------------------------------------------------------------
    // Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ³ÙˆÙŠØ©: `setBody`
    // Ù‡Ù†Ø§ ÙŠØªÙ… Ø¯Ù…Ø¬ "Ø§Ù„Ø·ÙŠÙ†" (Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª) Ù…Ø¹ "Ø§Ù„Ø¹Ù„Ù… Ø§Ù„ÙØ·Ø±ÙŠ" (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
    // Ù„Ø¥Ù†ØªØ§Ø¬ "Ø¬Ø³Ø¯ Ù…ÙØµÙˆÙ‘ÙŽØ±" (Virtual DOM)ØŒ ÙˆÙ‡Ùˆ Ù…Ø®Ø·Ø· Ø¯Ù‚ÙŠÙ‚ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
    // Ù‚Ø¨Ù„ Ø£Ù† ØªØ¯Ø¨ ÙÙŠÙ‡ Ø§Ù„Ø­ÙŠØ§Ø©.
    // ----------------------------------------------------------------
    Mishkah.app.setBody(function(db, h){
      db.head = { title: makeLangLookup(db).TL('app.title') };
      return UI.AppRoot({
        shell: D.Containers.Div({ attrs:{ class: `${tw`flex flex-col`} app-shell` }}, [
          HeaderBar(db),
          D.Containers.Div({ attrs:{ class: `${tw`flex-1 w-full`} content-shell` }}, [
            D.Containers.Div({ attrs:{ class: `${tw`w-full mx-auto flex flex-col lg:flex-row gap-8 px-6 pb-12 max-w-[1600px]`}` }}, [
              D.Containers.Aside({ attrs:{ class: `${tw`hidden lg:flex lg:w-[280px] lg:flex-col`}` }}, [
                D.Containers.Div({ attrs:{ class: tw`sticky top-28` }}, [ Sidebar(db) ])
              ]),
              D.Containers.Main({ attrs:{ class: `${tw`flex-1 min-h-0`} main-region`, style:'max-height:100vh;' }}, [
                D.Containers.Div({ attrs:{ class: tw`lg:hidden mb-6` }}, [ Sidebar(db) ]),
                D.Containers.Div({ attrs:{ class: tw`space-y-8` }}, [ MainContent(db) ])
              ])
            ])
          ])
        ])
      });
    });


    // ================================================================
    // Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„ØªÙ…ÙƒÙŠÙ† ÙˆØ§Ù„ØªÙƒÙ„ÙŠÙ (Ù†ÙØ® Ø§Ù„Ø±ÙˆØ­ ÙˆØ§Ù„Ø­ÙŠØ§Ø©)
    // Ù‡Ù†Ø§ Ù†Ù…Ù†Ø­ Ø§Ù„Ø¬Ø³Ø¯ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„Ù†Ù…Ùˆ.
    // ================================================================

    // ----------------------------------------------------------------
    // Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† (`database` as State)
    // Ù†ÙØ³ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª "DNA"ØŒ Ø£ØµØ¨Ø­Øª Ø§Ù„Ø¢Ù† "Ø§Ù„Ø±ÙˆØ­" Ø§Ù„Ø­ÙŠØ©ØŒ
    // ÙˆÙ‡ÙŠ Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆØ­Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ‡ØªØ¯ÙŠ Ø¨Ù‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.
    // ----------------------------------------------------------------
    // (Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù€ `database` Ù…Ø¹Ø±Ù Ù…Ø³Ø¨Ù‚Ù‹Ø§ØŒ Ù‡Ù†Ø§ ÙÙ‚Ø· Ù†ÙˆØ¶Ø­ Ø¯ÙˆØ±Ù‡ Ø§Ù„Ø¬Ø¯ÙŠØ¯)

    // ----------------------------------------------------------------
    // Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­ (`orders`)
    // Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙˆØ§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„ØªÙŠ ØªØ­Ø±Ùƒ Ø§Ù„Ø¬Ø³Ø¯ ÙˆØªØºÙŠØ± Ù…Ù† Ø­Ø§Ù„ "Ø¥ÙŠÙ…Ø§Ù†Ù‡".
    // ÙƒÙ„ "order" Ù‡Ùˆ Ø¹Ù…Ù„ ØµØ§Ù„Ø­ ÙŠØ³ØªØ¬ÙŠØ¨ Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙŠÙØ­Ø¯Ù‘Ø« Ø§Ù„Ø­Ø§Ù„Ø©.
    // ----------------------------------------------------------------
    const KEEP_MAIN_SCROLL = { keepScroll:['.main-region'] };

    const orders = {
      // Routing
      'route:readmeBase':{ on:['click'], gkeys:['route:readmeBase'], handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, activeTab:'readmeBase' }}); ctx.rebuild(); }},
      'route:readmeTec' :{ on:['click'], gkeys:['route:readmeTec' ], handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, activeTab:'readmeTec'  }}); ctx.rebuild(); }},
      'route:counter'   :{ on:['click'], gkeys:['route:counter'],   handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, activeTab:'counter'}}); ctx.rebuild(); }},
      'route:game'      :{ on:['click'], gkeys:['route:game'],      handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, activeTab:'game'   }}); ctx.rebuild(); }},

      // Counter
      'counter:inc'  :{ on:['click'], gkeys:['counter:inc'],   handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, counter:s.data.counter+1 }}); ctx.rebuild(); }},
      'counter:dec'  :{ on:['click'], gkeys:['counter:dec'],   handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, counter:s.data.counter-1 }}); ctx.rebuild(); }},
      'counter:reset':{ on:['click'], gkeys:['counter:reset'], handler:(e,ctx)=>{ const s=ctx.getState(); ctx.setState({...s, data:{...s.data, counter:0 }}); ctx.rebuild(); }},

      // Game toggles
      'game:music:toggle':{ on:['change'], gkeys:['game:music:toggle'], handler:(e,ctx)=>{
        const s=ctx.getState(); const g=s.data.game; const on = !!e.target.checked;
        const stamp = on ? Date.now() : g.soundStamp;
        ctx.setState({...s, data:{...s.data, game:{...g, musicOn:on, soundStamp: stamp }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }},
      'game:music:select':{ on:['change'], gkeys:['game:music:select'], handler:(e,ctx)=>{
        const s=ctx.getState(); const g=s.data.game; const idx=Math.max(0,parseInt(e.target.value,10)||0);
        ctx.setState({...s, data:{...s.data, game:{...g, audioIdx: idx, soundStamp: Date.now() }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }},
      'game:timer:toggle':{ on:['change'], gkeys:['game:timer:toggle'], handler:(e,ctx)=>{
        const s=ctx.getState(); const g=s.data.game; const on=!!e.target.checked; if(!on && g.intervalId) try{ clearInterval(g.intervalId); }catch(_){ }
        const timeLeft = on ? (g.status==='running' ? (typeof g.timeLeft === 'number' && g.timeLeft>0 ? g.timeLeft : g.timerSec) : g.timerSec) : 0;
        ctx.setState({...s, data:{...s.data, game:{...g, timerOn:on, timeLeft, intervalId: on ? g.intervalId : null }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }},
      'game:timer:value':{ on:['input','change'], gkeys:['game:timer:value'], handler:(e,ctx)=>{
        const s=ctx.getState(); const g=s.data.game; const v=Math.max(5, parseInt(e.target.value,10)||g.timerSec);
        const timeLeft = g.timerOn ? (g.status==='running' ? v : v) : g.timeLeft;
        ctx.setState({...s, data:{...s.data, game:{...g, timerSec: v, timeLeft }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }},

      // Start / New game
      'game:start':{ on:['click'], gkeys:['game:start'], handler:(e,ctx)=>{
        const s0=ctx.getState(); const g0=s0.data.game; if (g0.intervalId) try{ clearInterval(g0.intervalId); }catch(_){}
        const pv = PROVERBS[Math.floor(Math.random()*PROVERBS.length)];
        const stamp = Date.now();
        const baseTime = g0.timerOn ? g0.timerSec : 0;
        const g1 = { ...g0, proverb: pv, guessed:{}, triesLeft:g0.triesMax, status:'running', timeLeft: baseTime, intervalId:null, revealSolution:false, soundStamp: stamp, feedback:null };
        ctx.setState({ ...s0, data:{ ...s0.data, game:g1 } }); ctx.rebuild(KEEP_MAIN_SCROLL);

        if (g1.timerOn) {
          const iid = setInterval(()=>{
            const s=ctx.getState(); const g=s.data.game; if (g.status!=='running') { clearInterval(iid); return; }
            let timeLeft = typeof g.timeLeft === 'number' ? g.timeLeft - 1 : g.timerSec - 1;
            let triesLeft = g.triesLeft;
            let status = g.status;
            let feedback = g.feedback;
            if (timeLeft <= 0) {
              triesLeft = Math.max(0, triesLeft - 1);
              if (triesLeft === 0) {
                status = 'lost';
                timeLeft = 0;
                if (g.intervalId) try{ clearInterval(g.intervalId); }catch(_){}
                clearInterval(iid);
                feedback = { type:'lose', stamp: Date.now() };
              } else {
                timeLeft = g.timerSec;
                feedback = { type:'wrong', stamp: Date.now() };
              }
            }
            ctx.setState({ ...s, data:{ ...s.data, game:{ ...g, timeLeft, triesLeft, status, feedback, revealSolution: status==='won' ? true : g.revealSolution } }}); ctx.rebuild(KEEP_MAIN_SCROLL);
          }, 1000);
          const s1=ctx.getState(); const g2=s1.data.game;
          ctx.setState({ ...s1, data:{ ...s1.data, game:{ ...g2, intervalId:iid }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
        }
      }},

      // Guess
      'game:guess':{ on:['click'], gkeys:['game:guess'], handler:(e,ctx)=>{
        const btn = e.target.closest && e.target.closest('[data-ch]'); if (!btn) return;
        const L = btn.getAttribute('data-ch'); if (!L) return;
        const s=ctx.getState(); const g=s.data.game; if (g.status!=='running' || !g.proverb) return;

        const guessed = { ...g.guessed, [L]: true };
        const target = g.proverb.t;
        const has = target.split('').some(raw => norm(raw)===L);

        let triesLeft = g.triesLeft, status = g.status;
        if (!has) {
          triesLeft=Math.max(0, triesLeft-1);
          if (triesLeft===0){ status='lost'; if (g.intervalId) try{ clearInterval(g.intervalId); }catch(_){ } }
        }
        else {
          const letters = new Set(target.split('').map(norm).filter(x=>x.trim()!=='' && x!==' '));
          const all = Array.from(letters).every(k => guessed[k]); if (all){ status='won'; if (g.intervalId) try{ clearInterval(g.intervalId); }catch(_){ } }
        }

        const timeLeft = g.timerOn ? (status==='lost' ? 0 : (typeof g.timeLeft === 'number' ? g.timeLeft : g.timerSec)) : 0;
        let feedbackType = has ? 'correct' : 'wrong';
        if (status==='won') feedbackType = 'win';
        if (status==='lost') feedbackType = 'lose';
        const feedback = feedbackType ? { type: feedbackType, stamp: Date.now() } : null;
        ctx.setState({ ...s, data:{ ...s.data, game:{ ...g, guessed, triesLeft, status,
          timeLeft,
          revealSolution: status==='won' ? true : g.revealSolution,
          feedback
        }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }},
      'game:reveal':{ on:['click'], gkeys:['game:reveal'], handler:(e,ctx)=>{
        const s=ctx.getState(); const g=s.data.game; if (!g.proverb) return;
        ctx.setState({ ...s, data:{ ...s.data, game:{ ...g, revealSolution:true }}}); ctx.rebuild(KEEP_MAIN_SCROLL);
      }}
    };

    // ----------------------------------------------------------------
    // Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø®Ù„Ù‚: `createApp`
    // Ù‡Ù†Ø§ ÙŠØªÙ… Ø¯Ù…Ø¬ "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†" (database) Ù…Ø¹ "Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­" (orders)
    // Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­ÙŠ (`app`) Ø§Ù„Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„Ù†Ù…Ùˆ.
    // ----------------------------------------------------------------
    const app = Mishkah.app.createApp(database, orders);

    
    // ================================================================
    // Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø¨Ø¹Ø«
    // ================================================================

    // ----------------------------------------------------------------
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Auto)
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø­ÙŠØ·Ø©: Ø§Ù„Ø®Ø·ÙˆØ·ØŒ Ø§Ù„Ø«ÙŠÙ…Ø§ØªØŒ Ø§Ù„Ù„ØºØ§ØªØŒ ÙˆØ§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©.
    // ----------------------------------------------------------------
    const twx = U.twcss.auto(database, app);

    // ----------------------------------------------------------------
    // Ø¯Ù…Ø¬ ÙƒÙ„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± (setOrders)
    // Ù†Ø¬Ù…Ø¹ Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø§ØµØ© + Ø£ÙˆØ§Ù…Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© + Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¨ÙŠØ¦Ø©.
    // ----------------------------------------------------------------
    app.setOrders({ ...orders, ...UI.orders, ...twx.orders });

    // ----------------------------------------------------------------
    // Ø§Ù„Ø¨Ø¹Ø« (Mount)
    // Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„ØªÙŠ ÙŠØ¸Ù‡Ø± ÙÙŠÙ‡Ø§ Ø§Ù„ÙƒØ§Ø¦Ù† Ø§Ù„Ø­ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø§Ù„Ù… (DOM)ØŒ
    // Ù„ÙŠØ¨Ø¯Ø£ Ø±Ø­Ù„ØªÙ‡ ÙÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….
    // ----------------------------------------------------------------
    app.mount('#app');

  })();
  </script>
</body>
</html>
