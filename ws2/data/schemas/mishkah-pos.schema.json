{
  "id": "mishkah-pos",
  "label": "Mishkah Unified POS & KDS Schema",
  "version": "2024.11.03",
  "description": "Central schema for Mishkah POS terminals, kitchen displays, delivery dashboards, and supporting modules.",
  "modules": [
    {
      "id": "core",
      "label": "Core Settings",
      "paths": [
        "settings",
        "shift_settings",
        "payment_methods"
      ]
    },
    {
      "id": "pos",
      "label": "Point of Sale",
      "paths": [
        "orders",
        "ordersHistory",
        "tables",
        "menu",
        "customers",
        "diagnostics"
      ]
    },
    {
      "id": "kds",
      "label": "Kitchen Display System",
      "paths": [
        "jobs",
        "handoff",
        "kds",
        "stationMap"
      ]
    },
    {
      "id": "delivery",
      "label": "Delivery & Logistics",
      "paths": [
        "delivery"
      ]
    }
  ],
  "datasetShape": {
    "settings": {
      "sync": {
        "branch_id": "branch-main",
        "branch_name": {
          "en": "Main Branch",
          "ar": "الفرع الرئيسي"
        },
        "channel": "branch-main",
        "ws_endpoint": null,
        "token": null
      },
      "pos": {
        "id": "POS-01",
        "label": "Default POS",
        "number": 1
      }
    },
    "shift_settings": {
      "opening_float": 0,
      "pin": null,
      "pin_length": 4
    },
    "payment_methods": [],
    "menu": {
      "categories": [],
      "items": []
    },
    "inventory": {
      "items": []
    },
    "orders": [],
    "ordersHistory": [],
    "tables": [],
    "customers": [],
    "jobs": {
      "orders": [],
      "headers": [],
      "details": [],
      "modifiers": [],
      "statusHistory": []
    },
    "handoff": {},
    "kds": {
      "stations": [],
      "stationCategoryRoutes": [],
      "expo": {
        "tickets": []
      },
      "stationMap": {}
    },
    "stationMap": {},
    "delivery": {
      "drivers": [],
      "routes": [],
      "orders": []
    },
    "diagnostics": [],
    "meta": {
      "schemaId": "mishkah-pos",
      "generatedAt": null
    }
  },
  "shapeExpectations": [
    { "path": "settings", "type": "object", "required": true },
    { "path": "settings.sync", "type": "object", "required": true },
    { "path": "settings.pos", "type": "object" },
    { "path": "shift_settings", "type": "object" },
    { "path": "payment_methods", "type": "array" },
    { "path": "menu", "type": "object" },
    { "path": "menu.categories", "type": "array" },
    { "path": "menu.items", "type": "array" },
    { "path": "inventory.items", "type": "array" },
    { "path": "orders", "type": "array", "required": true },
    { "path": "ordersHistory", "type": "array" },
    { "path": "tables", "type": "array" },
    { "path": "customers", "type": "array" },
    { "path": "jobs", "type": "object" },
    { "path": "jobs.orders", "type": "array" },
    { "path": "jobs.headers", "type": "array" },
    { "path": "jobs.details", "type": "array" },
    { "path": "jobs.modifiers", "type": "array" },
    { "path": "jobs.statusHistory", "type": "array" },
    { "path": "handoff", "type": "object" },
    { "path": "kds", "type": "object" },
    { "path": "kds.stations", "type": "array" },
    { "path": "kds.stationCategoryRoutes", "type": "array" },
    { "path": "kds.expo", "type": "object" },
    { "path": "kds.expo.tickets", "type": "array" },
    { "path": "kds.stationMap", "type": "object" },
    { "path": "stationMap", "type": "object" },
    { "path": "delivery", "type": "object" },
    { "path": "delivery.drivers", "type": "array" },
    { "path": "delivery.routes", "type": "array" },
    { "path": "delivery.orders", "type": "array" },
    { "path": "diagnostics", "type": "array" },
    { "path": "meta", "type": "object" }
  ],
  "optionalPaths": [
    "inventory.items",
    "delivery.routes",
    "delivery.orders",
    "delivery.drivers",
    "customers",
    "tables",
    "diagnostics"
  ]
}
