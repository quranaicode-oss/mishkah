<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <title>Template Atlas â€” Ù„ÙˆØ­Ø© Ø¹Ù…Ù„ÙŠØ§Øª</title>
  <script src="./mishkah-utils.js"></script>
  <script src="./mishkah.core.js"></script>
  <script src="./mishkah-ui.js"></script>
  <script src="./mishkah.templates.js"></script>
</head>
<body>
  <div id="app"></div>

  <script>
    const { Mishkah } = window;
    const { DSL: D, utils: U, UI } = Mishkah;
    const { tw, cx } = U.twcss;

    const sections = {
      main: (ctx) => {
        const phases = ctx.db.data?.phases || [];
        const featureGrid = ctx.defaults.main(ctx);
        const board = D.Containers.Section({
          attrs: { class: cx('template-glass', tw`rounded-[28px] border px-6 py-8 space-y-4`) }
        }, [
          D.Text.H2({}, ['Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©']),
          D.Containers.Div({ attrs: { class: tw`grid gap-4 lg:grid-cols-2` } },
            phases.map((phase) => UI.Card({
              attrs: { key: `phase-${phase.id}`, class: tw`h-full` },
              title: `${phase.title}`,
              description: phase.description,
              content: D.Containers.Div({ attrs: { class: tw`flex items-center justify-between text-sm text-[var(--muted-foreground)]` } }, [
                D.Text.Span({}, [`${phase.owner}`]),
                D.Text.Span({}, [`%${phase.progress}`])
              ])
            }))
          )
        ]);
        return D.Containers.Div({ attrs: { class: tw`space-y-6` } }, [featureGrid, board]);
      },
      sidebar: (ctx) => {
        const team = ctx.db.data?.team || [];
        return D.Containers.Section({
          attrs: { class: cx('template-glass', tw`rounded-[28px] border px-6 py-8 space-y-4`) }
        }, [
          D.Text.H3({}, ['ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹']),
          D.Lists.Ul({ attrs: { class: tw`space-y-3` } },
            team.map((member, idx) => D.Lists.Li({
              attrs: { key: `member-${idx}`, class: tw`flex items-center gap-3 rounded-2xl bg-[color-mix(in_ oklab,var(--surface-2)_92%,transparent)] px-3 py-2` }
            }, [
              D.Containers.Div({ attrs: { class: tw`grid h-10 w-10 place-items-center rounded-full bg-[var(--accent)] text-base font-semibold` } }, [member.avatar || (member.name ? member.name.slice(0, 2) : 'ØŸ')]),
              D.Containers.Div({ attrs: { class: tw`flex flex-col` } }, [
                D.Text.Strong({}, [member.name]),
                D.Text.Span({ attrs: { class: tw`text-xs text-[var(--muted-foreground)]` } }, [member.role])
              ])
            ]))
          ),
          D.Containers.Div({ attrs: { class: tw`space-y-2 rounded-2xl bg-[color-mix(in_ oklab,var(--surface-2)_88%,transparent)] px-3 py-4 text-xs text-[var(--muted-foreground)]` } }, [
            D.Text.Strong({}, ['Ù…Ù„Ø§Ø­Ø¸Ø© Ø³Ø±ÙŠØ¹Ø©'] ),
            D.Text.Span({}, ['ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ù‚Ù† Ø£ÙŠ Ù…ÙƒÙˆÙ‘Ù† Ø¢Ø®Ø± Ù‡Ù†Ø§ Ù…Ø«Ù„ ØªÙ‚ÙˆÙŠÙ… Ø£Ùˆ Ù„ÙˆØ­Ø© ØªÙ†Ø¨ÙŠÙ‡Ø§Øª.'])
          ])
        ]);
      }
    };

    Mishkah.Templates.create({
      layout: 'atlas',
      mount: '#app',
      database: {
        data: {
          phases: [
            { id: 'research', title: 'Ø¨Ø­Ø« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', description: 'Ù…Ù‚Ø§Ø¨Ù„Ø§Øª + ØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø²ÙˆØ§Ø±.', owner: 'Ø´Ù‡Ø¯', progress: 72 },
            { id: 'design', title: 'ØªØµÙ…ÙŠÙ… Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©', description: 'Ø¨Ù†Ø§Ø¡ Ù†Ù…Ø§Ø°Ø¬ Figma ÙˆØ±Ø¨Ø· Ø§Ù„Ø£ÙˆØ§Ù…Ø±.', owner: 'Ø¨Ø§Ø³Ù„', progress: 56 },
            { id: 'handoff', title: 'ØªØ³Ù„ÙŠÙ… Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†', description: 'Ø¥Ø¹Ø¯Ø§Ø¯ DSL ÙˆØ±Ø¨Ø· Ø§Ù„Ù…ÙƒÙˆÙ‘Ù†Ø§Øª.', owner: 'Ø±Ù†Ø§', progress: 38 },
            { id: 'qa', title: 'Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©', description: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….', owner: 'Ù„ÙŠØ«', progress: 64 }
          ],
          team: [
            { name: 'Ø´Ù‡Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…', role: 'UX Lead', avatar: 'Ø´Ù‡Ø¯' },
            { name: 'Ø¨Ø§Ø³Ù„ Ø­Ø¬Ø§Ø²ÙŠ', role: 'Product Designer', avatar: 'BH' },
            { name: 'Ø±Ù†Ø§ Ø¹Ø¨Ø¯Ùˆ', role: 'Front-end', avatar: 'RA' },
            { name: 'Ù„ÙŠØ« ØµØ¨Ù‘Ø§Øº', role: 'QA Specialist', avatar: 'LS' }
          ]
        }
      },
      copy: {
        brand: { name: 'Digital Ops', tagline: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©' },
        hero: {
          eyebrow: 'Ù„ÙˆØ­Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹',
          title: 'ØªØ§Ø¨Ø¹ Ù…Ø³Ø§Ø± Ù…Ù†ØªØ¬Ùƒ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« Ø­ØªÙ‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚',
          description: 'Ù‚Ø§Ù„Ø¨ Atlas ÙŠÙ…Ù†Ø­Ùƒ Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± Ø­ÙŠ Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙØ±ÙŠÙ‚ Ù…Ø¹ Ù„ÙˆØ­Ø© ØªÙ†ÙÙŠØ° ØªØªØ­Ø¯Ø« Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.',
          bullets: [
            { icon: 'ðŸ› ï¸', text: 'ÙŠØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©.' },
            { icon: 'ðŸ§­', text: 'ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ ÙˆØ±Ø¨Ø· Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¨Ù‡Ø§.' }
          ],
          primary: { label: 'Ø­Ø¬Ø² Ø¬Ù„Ø³Ø© ØªØ¹Ø±ÙŠÙÙŠØ©', gkey: 'atlas.book-demo' },
          secondary: { label: 'ØªØ­Ù…ÙŠÙ„ Ø¹Ø±Ø¶ PDF', gkey: 'atlas.download' }
        },
        cta: {
          title: 'Ø§Ø¬Ù…Ø¹ ÙØ±ÙŠÙ‚Ùƒ Ø­ÙˆÙ„ Ù„ÙˆØ­Ø© ÙˆØ§Ø­Ø¯Ø©',
          description: 'Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§ØªØŒ Ø§Ù„Ø®Ø·Ø·ØŒ ÙˆØ§Ù„Ù€ KPIs ÙÙŠ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø£ÙˆØ§Ù…Ø± Ù…Ø´ÙƒØ§Ø©.',
          primary: { label: 'Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ù…Ø¨Ø§Ø´Ø±', gkey: 'atlas.book-demo' },
          secondary: { label: 'Ø¹Ø±Ø¶ Ø§Ù„ØªØ³Ø¹ÙŠØ±', gkey: 'atlas.download' }
        }
      },
      sections,
      orders: {
        'atlas.book-demo': {
          on: ['click'],
          gkeys: ['atlas.book-demo', 'templates:cta:primary'],
          handler: () => console.log('ðŸ“… Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¹Ø±Ø¶.')
        },
        'atlas.download': {
          on: ['click'],
          gkeys: ['atlas.download', 'templates:cta:secondary'],
          handler: () => window.open('https://example.com/atlas-overview.pdf', '_blank')
        }
      }
    });
  </script>
</body>
</html>
