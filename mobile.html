<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุชุฌุฑุจุฉ ุงูุชุทุจูู ุงููุตุฑูู โ ุนุฑุถ ูุงูุจ ูุดูุงุฉ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="./mishkah-utils.js"></script>
  <script src="./mishkah.core.js"></script>
  <script src="./mishkah-ui.js"></script>
  <script src="./mishkah.templates.js"></script>
</head>
<body>
  <div id="app"></div>
  <script>
    const { Chart } = Mishkah.UI;

    const mobileCopy = {
      statusBar: { time: '10:24', connectivity: '5G', battery: '๐ 76%' },
      header: { greeting: 'ุฃููุงูุ ูููุฏ', subtitle: 'ุฅุฌูุงูู ุงูุฑุตูุฏ ุงููุชุงุญ', avatar: '๐ณ', pageTitle: 'ุญุณุงุจุงุชู' },
      balance: {
        amount: '52,430 ุฑ.ุณ',
        change: '+2,150 ุฑ.ุณ ูุฐุง ุงูุดูุฑ',
        caption: 'ุชู ุงูุชุญุฏูุซ ูุจู ุฏูููุฉ',
        chart: {
          type: 'line',
          height: 140,
          data: {
            labels: ['ุฃ', 'ุจ', 'ุฌ', 'ุฏ', 'ูู', 'ู', 'ุฒ'],
            datasets: [
              {
                label: 'ุงูุฑุตูุฏ',
                data: [41, 43, 44, 46, 48, 50, 52],
                fill: true,
                borderColor: 'rgba(34,197,94,1)',
                backgroundColor: 'rgba(34,197,94,0.24)',
                pointRadius: 0
              }
            ]
          },
          options: {
            plugins: { legend: { display: false } },
            scales: { x: { display: false }, y: { display: false } }
          }
        }
      },
      quickActions: [
        { id: 'transfer', label: 'ุชุญููู', icon: 'โ๏ธ' },
        { id: 'split', label: 'ุชูุณูู ูุงุชูุฑุฉ', icon: '๐ค' },
        { id: 'topup', label: 'ุดุญู ุฑุตูุฏ', icon: 'โก๏ธ' }
      ],
      highlights: [
        { id: 'budget', title: 'ููุงุฒูุฉ ุงูุณูุฑ', value: '65% ูุณุชุฎุฏู', meta: '3,500 ุฑ.ุณ ูุชุจูู' },
        { id: 'goals', title: 'ุงุฏุฎุงุฑ ุงูุนูุงุฑ', value: '124,000 ุฑ.ุณ', meta: '+2,000 ุฑ.ุณ ูุฐุง ุงูุฑุจุน' }
      ],
      transactions: {
        title: 'ุขุฎุฑ ุงูุญุฑูุงุช',
        items: [
          { id: 'coffee', name: 'ูููู ุงููุณุงุก', time: 'ุงูููู โข 08:10', amount: '-18 ุฑ.ุณ', type: 'out' },
          { id: 'salary', name: 'ุฑุงุชุจ ุงูุดุฑูุฉ', time: 'ุฃูุณ โข 18:30', amount: '+12,500 ุฑ.ุณ', type: 'in' },
          { id: 'rent', name: 'ุฏูุนุฉ ุฅูุฌุงุฑ', time: 'ุฃูุณ โข 08:00', amount: '-4,200 ุฑ.ุณ', type: 'out' }
        ],
        action: { label: 'ุนุฑุถ ุงูุณุฌู ุงููุงูู', gkey: 'mobile:transactions:all' }
      },
      pages: [
        {
          id: 'overview',
          label: 'ุงูุฑุฆูุณูุฉ',
          header: { greeting: 'ุฃููุงูุ ูููุฏ', subtitle: 'ุฅุฌูุงูู ุงูุฑุตูุฏ ุงููุชุงุญ', avatar: '๐ณ', pageTitle: 'ุงูุญุณุงุจุงุช ุงููุดุทุฉ' },
          balance: {
            amount: '52,430 ุฑ.ุณ',
            change: '+2,150 ุฑ.ุณ ูุฐุง ุงูุดูุฑ',
            caption: 'ุชูุช ุงููุฒุงููุฉ ูุจู ุฏูููุฉ',
            chart: {
              type: 'line',
              height: 140,
              data: {
                labels: ['ุฃ', 'ุจ', 'ุฌ', 'ุฏ', 'ูู', 'ู', 'ุฒ'],
                datasets: [
                  {
                    label: 'ุงูุฑุตูุฏ ุงูุชุฑุงููู',
                    data: [41, 43, 44, 46, 48, 50, 52],
                    fill: true,
                    borderColor: 'rgba(59,130,246,1)',
                    backgroundColor: 'rgba(59,130,246,0.24)',
                    pointRadius: 0
                  }
                ]
              },
              options: {
                plugins: { legend: { display: false } },
                scales: { x: { display: false }, y: { display: false } }
              }
            }
          },
          quickActions: [
            { id: 'transfer', label: 'ุชุญููู ุณุฑูุน', icon: 'โ๏ธ' },
            { id: 'split', label: 'ุชูุณูู ูุงุชูุฑุฉ', icon: '๐ค' },
            { id: 'saving', label: 'ุฅูุฏุงุน ุงุฏุฎุงุฑ', icon: '๐' }
          ],
          highlights: [
            { id: 'budget', title: 'ููุงุฒูุฉ ุงูุณูุฑ', value: '65% ูุณุชุฎุฏู', meta: '3,500 ุฑ.ุณ ูุชุจูู' },
            { id: 'goals', title: 'ูุฏู ุงูุนูุงุฑ', value: '124,000 ุฑ.ุณ', meta: '+2,000 ุฑ.ุณ ูุฐุง ุงูุฑุจุน' }
          ],
          transactions: {
            title: 'ุขุฎุฑ ุงูุญุฑูุงุช',
            items: [
              { id: 'coffee', name: 'ูููู ุงููุณุงุก', time: 'ุงูููู โข 08:10', amount: '-18 ุฑ.ุณ', type: 'out' },
              { id: 'salary', name: 'ุฑุงุชุจ ุงูุดุฑูุฉ', time: 'ุฃูุณ โข 18:30', amount: '+12,500 ุฑ.ุณ', type: 'in' },
              { id: 'rent', name: 'ุฏูุนุฉ ุฅูุฌุงุฑ', time: 'ุฃูุณ โข 08:00', amount: '-4,200 ุฑ.ุณ', type: 'out' }
            ],
            action: { label: 'ุนุฑุถ ุงูุณุฌู ุงููุงูู', gkey: 'mobile:transactions:all' }
          }
        },
        {
          id: 'cards',
          label: 'ุงูุจุทุงูุงุช',
          header: { greeting: 'ุงูุจุทุงูุงุช ุงูุฐููุฉ', subtitle: 'ุฅุฏุงุฑุฉ ุงูุจุทุงูุงุช ุงูุฑูููุฉ', avatar: '๐', pageTitle: 'ุฅุฏุงุฑุฉ ุงูุจุทุงูุงุช' },
          quickActions: [
            { id: 'freeze', label: 'ุฅููุงู ุจุทุงูุฉ', icon: '๐' },
            { id: 'limit', label: 'ุชุนุฏูู ุงูุญุฏูุฏ', icon: '๐ฏ' },
            { id: 'issue', label: 'ุฅุตุฏุงุฑ ุจุทุงูุฉ', icon: 'โจ' }
          ],
          highlights: [
            { id: 'visa', title: 'ุจุทุงูุฉ Visa', value: '12,500 ุฑ.ุณ ุญุฏ ูุชุงุญ', meta: 'ุขุฎุฑ ุงุณุชุฎุฏุงู ูุจู 12 ุณุงุนุฉ' },
            { id: 'digital', title: 'ุงูุจุทุงูุฉ ุงูุฑูููุฉ', value: '4,300 ุฑ.ุณ ุญุฏ ูุชุงุญ', meta: 'ุงุณุชุฎุฏุงู ุฃุณุจูุนู 3 ูุฑุงุช' }
          ],
          transactions: {
            title: 'ูุดุงุท ุงูุจุทุงูุงุช',
            items: [
              { id: 'flight', name: 'ุญุฌุฒ ุทูุฑุงู', time: 'ุงูููู โข 07:10', amount: '-1,240 ุฑ.ุณ', type: 'out' },
              { id: 'refund', name: 'ุงุณุชุฑุฏุงุฏ ูุชุฌุฑ', time: 'ุฃูุณ โข 19:40', amount: '+320 ุฑ.ุณ', type: 'in' },
              { id: 'subscription', name: 'ุงุดุชุฑุงู ููุตุฉ', time: 'ุฃูุณ โข 11:05', amount: '-45 ุฑ.ุณ', type: 'out' }
            ],
            action: { label: 'ุฅุฏุงุฑุฉ ุงูุจุทุงูุงุช', gkey: 'mobile:cards:manage' }
          }
        },
        {
          id: 'insights',
          label: 'Insights',
          header: { greeting: 'Financial Insights', subtitle: 'Global spend overview', avatar: '๐', pageTitle: 'Analytics' },
          balance: {
            amount: '$13,480',
            change: 'YoY growth 18%',
            caption: 'Last synced 2 minutes ago',
            chart: {
              type: 'bar',
              height: 160,
              data: {
                labels: ['Transport', 'Dining', 'Shopping', 'Travel'],
                datasets: [
                  {
                    label: 'Spending',
                    data: [620, 540, 460, 380],
                    borderRadius: 14,
                    backgroundColor: ['rgba(56,189,248,0.75)', 'rgba(249,115,22,0.78)', 'rgba(129,140,248,0.82)', 'rgba(16,185,129,0.82)']
                  }
                ]
              },
              options: {
                plugins: { legend: { display: false } },
                scales: {
                  y: {
                    beginAtZero: true,
                    ticks: { callback: Chart.formatters.currency('USD', { locale: 'en-US', digits: 0 }) }
                  }
                }
              }
            }
          },
          highlights: [
            { id: 'trend', title: 'Spending trend', value: '-8% vs last month', meta: 'Keep up the pace' },
            { id: 'saving', title: 'Saving goal', value: '62% completed', meta: '4 months left to target' }
          ],
          transactions: {
            title: 'Upcoming reminders',
            items: [
              { id: 'rent', name: 'Rent payment', time: 'Due in 3 days', amount: '-$1,120', type: 'out' },
              { id: 'invest', name: 'Investment plan', time: 'Due next week', amount: '-$600', type: 'out' },
              { id: 'bonus', name: 'Annual bonus', time: 'Next month', amount: '+$2,400', type: 'in' }
            ],
            action: { label: 'Manage reminders', gkey: 'mobile:insights:reminders' }
          }
        }
      ],
      sideMenu: {
        profile: { name: 'ูููุฏ ูุงุตุฑ', email: 'waleed@mishkah.app', avatar: '๐ชช', badge: 'Gold' },
        items: [
          { id: 'overview', icon: '๐', label: 'ููุญุฉ ุงูุญุณุงุจ' },
          { id: 'cards', icon: '๐ณ', label: 'ุงูุจุทุงูุงุช ุงูุฐููุฉ' },
          { id: 'insights', icon: '๐', label: 'ุงูุชุญูููุงุช' }
        ],
        preferences: [
          { id: 'theme', icon: '๐', label: 'ุชุจุฏูู ุงูุซูู', gkey: 'ui:theme-toggle' },
          { id: 'lang-ar', icon: '๐ธ๐ฆ', label: 'ุงูุนุฑุจูุฉ', gkey: 'ui:lang-ar' },
          { id: 'lang-en', icon: '๐ฌ๐ง', label: 'English', gkey: 'ui:lang-en' }
        ],
        footer: { label: 'ุชุณุฌูู ุงูุฎุฑูุฌ', gkey: 'mobile:menu:logout' }
      },
      bottomNav: {
        items: [
          { id: 'overview', label: 'ุงูุฑุฆูุณูุฉ', icon: '๐' },
          { id: 'cards', label: 'ุงูุจุทุงูุงุช', icon: '๐ณ' },
          { id: 'insights', label: 'Insights', icon: '๐' }
        ]
      }
    };

    const demoOrders = {
      'demo.mobile.cards.manage': {
        on: ['click'], gkeys: ['mobile:cards:manage'],
        handler: () => {
          window.dispatchEvent(new CustomEvent('mishkah:template', { detail: { type: 'mobile:cards:manage', payload: {} } }));
        }
      },
      'demo.mobile.insights.reminders': {
        on: ['click'], gkeys: ['mobile:insights:reminders'],
        handler: () => {
          window.dispatchEvent(new CustomEvent('mishkah:template', { detail: { type: 'mobile:insights:reminders', payload: {} } }));
        }
      }
    };

    Mishkah.Templates.mobile.create({
      mount: '#app',
      theme: 'dark',
      lang: 'ar',
      copy: mobileCopy,
      orders: demoOrders
    });

    window.addEventListener('mishkah:template', (event) => {
      const detail = event.detail || {};
      const { type, payload } = detail;
      if (!type) return;
      if (type === 'mobile:actions:select') {
        console.info('๐ข ุชู ุงุฎุชูุงุฑ ุฅุฌุฑุงุก ุณุฑูุน:', payload);
      } else if (type === 'mobile:transactions:all') {
        window.alert('๐ ุนุฑุถ ุณุฌู ุงูุญุฑูุงุช ุงููุงูู');
      } else if (type === 'mobile:menu:open') {
        console.debug('๐ ูุชุญ ูุงุฆูุฉ ุงูุชููู ุงูุฌุงูุจูุฉ');
      } else if (type === 'mobile:menu:close') {
        console.debug('๐ ุฅุบูุงู ูุงุฆูุฉ ุงูุชููู');
      } else if (type === 'mobile:page:select') {
        console.info('๐ฑ ุชู ุงูุงูุชูุงู ุฅูู ุตูุญุฉ:', payload);
      } else if (type === 'mobile:cards:manage') {
        window.alert('๐ณ ูุชุญ ุฅุนุฏุงุฏุงุช ุฅุฏุงุฑุฉ ุงูุจุทุงูุงุช');
      } else if (type === 'mobile:insights:reminders') {
        window.alert('โฐ ุนุฑุถ ุชุฐููุฑุงุช ุงูุชุญูููุงุช ุงููุงุฏูุฉ');
      } else if (type === 'mobile:menu:logout') {
        window.alert('๐ ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุงูุฌูุณุฉ ุงูุชุฌุฑูุจูุฉ');
      }
    });
  </script>
</body>
</html>
