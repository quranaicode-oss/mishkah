<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù†Ù…Ùˆ â€” Ø¹Ø±Ø¶ Ù‚Ø§Ù„Ø¨ Ù…Ø´ÙƒØ§Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="./mishkah-utils.js"></script>
  <script src="./mishkah.core.js"></script>
  <script src="./mishkah-ui.js"></script>
  <script src="./mishkah.templates.js"></script>
</head>
<body>
  <div id="app"></div>
  <script>
    const { Chart } = Mishkah.UI;

    const dashboardCopy = {
      brand: {
        name: 'Ù…Ø±ÙƒØ² Ù†Ù…Ùˆ Ø§Ù„ØªØ¬Ø§Ø±Ø©',
        subtitle: 'Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù„Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',
        initials: 'TG'
      },
      filters: {
        activeRange: '7d',
        searchPlaceholder: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ Ø£Ùˆ Ù‚Ù†Ø§Ø© ØªØ³ÙˆÙŠÙ‚',
        user: 'Ø±ÙŠÙ… Ø­ÙƒÙŠÙ…',
        ranges: [
          { id: '24h', label: 'Ø¢Ø®Ø± Ù¢Ù¤ Ø³Ø§Ø¹Ø©' },
          { id: '7d', label: 'Ø¢Ø®Ø± Ù§ Ø£ÙŠØ§Ù…' },
          { id: '30d', label: 'Ø¢Ø®Ø± Ù£Ù  ÙŠÙˆÙ…' },
          { id: 'ytd', label: 'Ù…Ù†Ø° Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ø§Ù…' }
        ],
        primaryAction: { label: 'ØªØµØ¯ÙŠØ± CSV', gkey: 'dashboard:export' }
      },
      stats: [
        { id: 'gmv', title: 'Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', value: '482,300 Ø±.Ø³', meta: '+18% Ø¹Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ' },
        { id: 'orders', title: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', value: '8,640', meta: '+6% Ù†Ù…Ùˆ' },
        { id: 'aov', title: 'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨', value: '55.8 Ø±.Ø³', meta: '+3.1 Ø±.Ø³' },
        { id: 'repeat', title: 'Ù†Ø³Ø¨Ø© ØªÙƒØ±Ø§Ø± Ø§Ù„Ø´Ø±Ø§Ø¡', value: '42%', meta: '+5 Ù†Ù‚Ø§Ø·' }
      ],
      charts: {
        performance: {
          title: 'Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª',
          subtitle: 'Ù‚ÙŠØ§Ø³ Ù†Ù…Ùˆ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ù…Ù†ØµØ© Ù…Ø´ÙƒØ§Ø©',
          height: 320,
          data: {
            labels: ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'],
            datasets: [
              {
                label: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¢Ù„Ø§Ù Ø±.Ø³)',
                data: [58, 62, 64, 71, 78, 86, 92],
                fill: true,
                backgroundColor: 'rgba(14,165,233,0.18)',
                borderColor: 'rgba(14,165,233,1)',
                pointBackgroundColor: 'rgba(14,165,233,1)'
              },
              {
                label: 'Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª (%)',
                data: [3.1, 3.3, 3.4, 3.6, 3.8, 4.1, 4.3],
                yAxisID: 'percentage',
                borderColor: 'rgba(251,191,36,1)',
                backgroundColor: 'rgba(251,191,36,0.28)',
                pointBackgroundColor: 'rgba(251,191,36,1)',
                fill: false
              }
            ]
          },
          options: {
            scales: {
              y: { suggestedMax: 100 },
              percentage: {
                position: 'right',
                suggestedMax: 5,
                ticks: { callback: Chart.formatters.percent(1) }
              }
            },
            plugins: { legend: { position: 'bottom' } }
          }
        },
        conversion: {
          title: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ù†Ø§Ø©',
          subtitle: 'Ø­Ù…Ù„Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„Ù…Ø§Ø¶ÙŠ',
          height: 220,
          data: {
            labels: ['Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø­Ø«', 'ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„', 'Ø§Ù„Ø´Ø±ÙƒØ§Ø¡', 'Ø§Ù„Ù†Ø´Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠØ©'],
            datasets: [
              {
                label: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„',
                data: [5.4, 3.8, 4.7, 6.1],
                backgroundColor: [
                  'rgba(59,130,246,0.85)',
                  'rgba(129,140,248,0.85)',
                  'rgba(16,185,129,0.85)',
                  'rgba(251,191,36,0.85)'
                ],
                borderRadius: 16
              }
            ]
          },
          options: {
            plugins: { legend: { display: false } },
            scales: {
              y: {
                beginAtZero: true,
                ticks: { callback: Chart.formatters.percent(1) }
              }
            }
          }
        },
        breakdown: {
          title: 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‹Ø§',
          subtitle: 'Ù†Ø³Ø¨Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©',
          height: 220,
          data: {
            labels: ['Ø§Ù„Ù‡Ø§ØªÙ', 'Ø§Ù„Ø­Ø§Ø³ÙˆØ¨', 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„ÙˆØ­ÙŠØ©'],
            datasets: [
              {
                data: [61, 29, 10],
                backgroundColor: ['#6366F1', '#10B981', '#F59E0B'],
                borderWidth: 0
              }
            ]
          },
          options: {
            plugins: { legend: { position: 'right' } }
          }
        }
      },
      table: {
        title: 'Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©',
        subtitle: 'Ø£ÙØ¶Ù„ Ù¥ Ù…ØªØ§Ø¬Ø± Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù†Ù…Ùˆ',
        columns: [
          { key: 'store', label: 'Ø§Ù„Ù…ØªØ¬Ø±' },
          { key: 'sessions', label: 'Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª' },
          { key: 'orders', label: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª' },
          { key: 'rate', label: 'Ø§Ù„ØªØ­ÙˆÙŠÙ„' }
        ],
        rows: [
          { store: 'Ù†ÙˆØ± Ù„Ù„Ø¹Ø·ÙˆØ±', sessions: '24,500', orders: '1,560', rate: '6.4%' },
          { store: 'Ù…Ø·Ø¨Ø® Ø§Ù„Ù…Ø°Ø§Ù‚', sessions: '17,820', orders: '980', rate: '5.5%' },
          { store: 'Ø²Ù‡Ø±Ø© Ø§Ù„Ø±ÙŠØ§Ø¶', sessions: '14,230', orders: '860', rate: '6.0%' },
          { store: 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø°ÙƒÙŠØ©', sessions: '13,940', orders: '720', rate: '5.2%' },
          { store: 'Ø£Ø²ÙŠØ§Ø¡ Ù†ÙˆÙØ§', sessions: '11,310', orders: '610', rate: '5.4%' }
        ],
        action: { label: 'Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ§Ø¬Ø±', gkey: 'dashboard:table:action' }
      },
      activity: {
        title: 'Ù…Ù‡Ø§Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
        subtitle: 'Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚',
        items: [
          { id: 'campaign', icon: 'ğŸš€', title: 'Ø¥Ø·Ù„Ø§Ù‚ Ø­Ù…Ù„Ø© Ø§Ù„ØµÙŠÙ', status: 'Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„Ø©', due: 'Ø§Ù„ÙŠÙˆÙ…' },
          { id: 'inventory', icon: 'ğŸ“¦', title: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', status: 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°', due: 'ØºØ¯Ù‹Ø§' },
          { id: 'support', icon: 'ğŸ’¬', title: 'Ù…ØªØ§Ø¨Ø¹Ø© ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡', status: 'Ø¨Ø­Ø§Ø¬Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', due: 'Ø§Ù„Ø®Ù…ÙŠØ³' }
        ]
      }
    };

    Mishkah.Templates.dashboard.create({
      mount: '#app',
      theme: 'light',
      copy: dashboardCopy
    });

    window.addEventListener('mishkah:template', (event) => {
      const detail = event.detail || {};
      const { type, payload } = detail;
      if (!type) return;
      if (type === 'dashboard:export') {
        window.alert('ğŸ“Š ØªÙ… ØªØ¬Ù‡ÙŠØ² Ù…Ù„Ù CSV Ù„Ù„ØªÙ†Ø²ÙŠÙ„.');
      } else if (type === 'dashboard:filters:range') {
        console.info('ğŸ” ØªÙ… ØªØºÙŠÙŠØ± Ù†Ø·Ø§Ù‚ Ø§Ù„ÙˆÙ‚Øª:', payload);
      } else if (type === 'dashboard:table:action') {
        console.info('ğŸ“ˆ Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©');
      }
    });
  </script>
</body>
</html>
